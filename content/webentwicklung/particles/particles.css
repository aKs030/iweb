/* ===== Global Particle Background System ===== */
.global-particle-background {
  position: fixed; 
  inset: 0; 
  z-index: -10; 
  pointer-events: none;
  isolation: isolate; /* verhindert Blend-Effekte mit fremden Stacking-Contexts */
  contain: layout style paint; /* Erweiterte Containment für bessere Performance */
  
  /* Erweiterte Konfiguration via CSS-Variablen */







}

.global-particle-background .particle-canvas {
  position: absolute; 
  inset: 0; 
  width: 100%; 
  height: 100%;
  opacity: var(--particle-opacity, 0.4);
  transition: opacity var(--transition-slow), filter var(--transition-slow), background-color var(--transition-slow);
  will-change: opacity, filter;
  cursor: none;
  /* Performance-Optimierungen */
  transform: translateZ(0); /* Hardware-Beschleunigung */
  backface-visibility: hidden;
  /* Stern-Effekte */
  filter: brightness(var(--star-brightness, 1.2)) contrast(1.1);
}

.global-particle-background .gradient-overlay {
  position: absolute; 
  inset: 0;
  background: radial-gradient(ellipse at center, transparent 0%, var(--bg-primary, #0a0a0a) 85%);
  opacity: 0.8;
  pointer-events: none;
}

/* ===== Section-spezifische Star-Konfigurationen ===== */
.global-particle-background[data-section="hero"] {


}

.global-particle-background[data-section="features"] {


}

.global-particle-background[data-section="about"] {


}

/* ===== Star-Enhanced Modes ===== */
.global-particle-background[data-star-mode="magical"] .particle-canvas {
  filter: brightness(1.5) contrast(1.2) saturate(1.3);
  animation: starTwinkle var(--star-twinkle-speed, 2s) ease-in-out infinite alternate;
}

.global-particle-background[data-star-mode="cosmic"] .particle-canvas {
  filter: brightness(1.3) contrast(1.1) hue-rotate(15deg);
}

@keyframes starTwinkle {
  0% { 
    filter: brightness(1.2) contrast(1.1); 
    opacity: var(--particle-opacity, 0.4);
  }
  50% { 
    filter: brightness(1.6) contrast(1.3); 
    opacity: calc(var(--particle-opacity, 0.4) * 1.2);
  }
  100% { 
    filter: brightness(1.2) contrast(1.1); 
    opacity: var(--particle-opacity, 0.4);
  }
}
.global-particle-background[data-particle-collisions="true"] { 
  filter: brightness(1.1); 
}

.global-particle-background[data-particle-bounce="true"] { 
  border: 1px solid rgba(255, 255, 255, 0.1); 
}

/* ===== Debug-Modus ===== */
.global-particle-background[data-particle-debug="true"] .particle-canvas {
  border: 2px dashed rgba(255, 255, 0, 0.3);
  position: relative;
}

.global-particle-background[data-particle-debug="true"]::after {
  content: "DEBUG MODE ACTIVE";
  position: absolute;
  top: 10px;
  right: 10px;
  background: rgba(255, 255, 0, 0.9);
  color: black;
  padding: 4px 8px;
  font-size: 12px;
  font-weight: bold;
  border-radius: 4px;
  z-index: 1000;
  pointer-events: none;
}

/* ===== Mobile & Touch Optimizations ===== */
@media (max-width: 768px) {
  .global-particle-background {


  }
  
  .global-particle-background .particle-canvas {
    filter: brightness(1.0) contrast(1.0);
  }
}

@media (hover: none) and (pointer: coarse) {
  .global-particle-background {

  }
}

/* ===== High Performance Mode für Low-End Devices ===== */
@media (max-width: 480px) {
  .global-particle-background[data-particle-trails="true"] {

  }
  
  .global-particle-background[data-particle-glow="true"] .particle-canvas {
    filter: none;
  }
}

/* ===== Section State Integration ===== */
.snap-section.section-active ~ .global-particle-background .particle-canvas { 
  opacity: 0.5; 
}

/* ===== High Contrast Support ===== */
@media (prefers-contrast: high) {
  .global-particle-background {

  }
  
  .global-particle-background .gradient-overlay {
    opacity: 0.9;
  }
}