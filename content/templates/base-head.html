<!-- Import Map for ES Modules - Centralized for all pages -->
<!-- Must be as early as possible in the head -->
<!-- Three.js version: sync with THREE_VERSION in content/config/constants.js -->
<script type="importmap">
  {
    "imports": {
      "react": "https://esm.sh/react@19.2.4",
      "react-dom": "https://esm.sh/react-dom@19.2.4",
      "react-dom/client": "https://esm.sh/react-dom@19.2.4/client",
      "lucide-react": "https://esm.sh/lucide-react@0.575.0",
      "three": "https://cdn.jsdelivr.net/npm/three@0.183.1/build/three.module.min.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.183.1/examples/jsm/",
      "dompurify": "https://esm.sh/dompurify@3.3.1",
      "htm": "https://esm.sh/htm@3.1.1",
      "idb-keyval": "https://esm.sh/idb-keyval@6.2.1",
      "#core/": "/content/core/",
      "#components/": "/content/components/",
      "#config/": "/content/config/"
    },
    "scopes": {
      "https://esm.sh/": {
        "react": "https://esm.sh/react@19.2.4"
      }
    }
  }
</script>

<!-- Theme bootstrap (run before stylesheets) -->
<script>
  (function () {
    try {
      var stored = localStorage.getItem('theme');
      var prefersLight =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: light)').matches;
      var theme =
        stored === 'light' || stored === 'dark'
          ? stored
          : prefersLight
            ? 'light'
            : 'dark';
      document.documentElement.setAttribute('data-theme', theme);
    } catch (_err) {
      document.documentElement.setAttribute('data-theme', 'dark');
    }
  })();
</script>

<!-- Generated design tokens (single file with :root + [data-theme] blocks) -->
<link rel="stylesheet" href="/content/styles/tokens.css" id="tokens-css" />

<!-- Critical CSS - Loaded immediately to prevent FOUC -->
<link rel="stylesheet" href="/content/styles/root.css" />
<link rel="stylesheet" href="/content/styles/main.css" />
<link rel="stylesheet" href="/content/styles/animations.css" />
<link rel="stylesheet" href="/content/styles/loader.css" />

<!-- Meta Tags -->
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<meta name="format-detection" content="telephone=no,email=no" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=5"
/>
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-touch-fullscreen" content="yes" />

<!-- Favicons -->
<link rel="icon" href="/favicon.ico" sizes="48x48" />
<link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml" />
<link
  rel="icon"
  type="image/webp"
  sizes="512x512"
  href="https://img.abdulkerimsesli.de/icons/favicon-512.webp?v=20260221"
/>
<link
  rel="apple-touch-icon"
  sizes="180x180"
  href="https://img.abdulkerimsesli.de/icons/apple-touch-icon.webp?v=20260221"
/>

<!-- Google Search Console - Favicon für Suchergebnisse -->
<link rel="shortcut icon" href="https://www.abdulkerimsesli.de/favicon.ico" />

<!-- PWA -->
<link rel="manifest" href="/manifest.json" />
<link
  rel="alternate"
  type="application/rss+xml"
  title="Abdulkerim Sesli — Blog"
  href="/api/feed.xml"
/>
<!-- Browser & PWA Integration -->
<!-- theme-color is managed dynamically by theme-color-manager.js -->
<meta
  name="apple-mobile-web-app-status-bar-style"
  content="black-translucent"
/>
<!-- Static fallback: fully transparent theme color for direct loads -->
<meta name="theme-color" id="meta-theme-color-fallback" content="#00000000" />

<!-- Sitemap -->
<link rel="sitemap" href="/sitemap-index.xml" type="application/xml" />
<link rel="alternate" type="text/plain" href="/llms.txt" title="LLM Index" />
<link
  rel="alternate"
  type="text/plain"
  href="/llms-full.txt"
  title="LLM Full Index"
/>
<link
  rel="alternate"
  type="application/json"
  href="/ai-index.json"
  title="AI Index"
/>
<link rel="alternate" type="text/html" href="/ai-info" title="AI Profile Hub" />

<!-- Preconnect to Critical Resources (with dns-prefetch fallback) -->
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
<link rel="preconnect" href="https://esm.sh" crossorigin />
<link rel="preconnect" href="https://img.abdulkerimsesli.de" crossorigin />
<link rel="preconnect" href="https://www.googletagmanager.com" crossorigin />
<link rel="preconnect" href="https://www.google-analytics.com" crossorigin />
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />
<link rel="dns-prefetch" href="https://esm.sh" />
<link rel="dns-prefetch" href="https://img.abdulkerimsesli.de" />
<link rel="dns-prefetch" href="https://www.googletagmanager.com" />
<link rel="dns-prefetch" href="https://www.google-analytics.com" />

<!-- Preload Critical App JS -->
<link rel="modulepreload" href="/content/main.js" />
<link rel="modulepreload" href="/content/components/head/head-inline.js" />
<link rel="modulepreload" href="/content/core/theme-color-manager.js" />

<!-- Core Scripts -->
<script type="module" src="/content/components/head/head-inline.js"></script>
<script type="module">
  // Initialize theme color manager immediately for all pages
  import { initThemeColorManager } from '/content/core/theme-color-manager.js';
  initThemeColorManager();
</script>
<script type="module" src="/content/main.js"></script>
