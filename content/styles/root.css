/* =======================
   Runtime CSS Variables
======================= */

/* Import compatibility aliases and responsive token mappings */
@import './variables.css';

:root {
  /* Safe-area tokens used by layout calculations */
  --safe-top: env(safe-area-inset-top, var(--size-0));
  --safe-right: env(safe-area-inset-right, var(--size-0));
  --safe-bottom: env(safe-area-inset-bottom, var(--size-0));
  --safe-left: env(safe-area-inset-left, var(--size-0));

  /* Fallback when theme bootstrap is unavailable */
  --particle-color: color-mix(in srgb, var(--primary-color) 80%, transparent);

  /* Runtime-computed typography tokens */
  --font-size-p: var(--size-r-1-08);
  --line-height-base: 1.7;
  --headline-fs: clamp(var(--size-r-3), 6vw, calc(var(--size-r-1-5) * 3));
  --headline-lh: 1.03;
  --headline-weight: 900;
  --headline-letter: -0.02em;
  --greet-fs: var(--headline-fs);
  --greet-lh: var(--headline-lh);
  --greet-weight: 800;
  --greet-letter: var(--headline-letter);
  --greet-max: clamp(18ch, 44vw, 30ch);
  --greet-grad: var(--greet-gradient);

  /* Offset tokens composed from generated design tokens */
  --content-top-offset: calc(var(--menu-height) + var(--safe-top));
  --content-bottom-offset: calc(var(--footer-height) + var(--safe-bottom));
}

/* ============================================
     RESPONSIVE BREAKPOINTS
     ============================================ */

/* Responsive tweaks: slightly smaller headings on very small viewports */
@media (width <= 420px) {
  :root {
    --headline-fs: clamp(var(--size-r-2-2), 8vw, var(--size-r-3));
    --greet-fs: var(--headline-fs);
    --greet-min-inline: clamp(14ch, 36vw, 28ch);
    --greet-max: clamp(14ch, 100vw, 26ch);
    --card-min-width: 0;
  }
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Global responsive media elements */
img,
svg,
picture,
video,
iframe {
  max-width: 100%;
  height: auto;
  display: block;
}

/* ============================================
   STATUS BAR BLEED (for transparent status bars)
   Ensures a controlled background behind the device
   safe-area (iOS PWA / modern Android browsers)
============================================ */
#status-bar-bleed {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: env(safe-area-inset-top, var(--size-0));
  pointer-events: none;
  z-index: var(--z-top-overlay);
  background: transparent !important;
  transition: opacity var(--duration-160ms) linear;
  opacity: 1;
}

/* When safe-area is zero, hide the element to avoid layout impact */
@supports (height: env(safe-area-inset-top)) {
  :root {
    --has-safe-area: env(safe-area-inset-top);
  }
}

/* Hide scrollbars globally while keeping scroll intact */
html,
body {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

html::-webkit-scrollbar,
body::-webkit-scrollbar,
*::-webkit-scrollbar {
  width: 0;
  height: 0;
  background: transparent;
  display: none;
}
