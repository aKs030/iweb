(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();const Ie="modulepreload",De=function(i){return"/"+i},he={},J=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let o=function(d){return Promise.all(d.map(l=>Promise.resolve(l).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),a=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=o(t.map(d=>{if(d=De(d),d in he)return;he[d]=!0;const l=d.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":Ie,l||(h.as="script"),h.crossOrigin="",h.href=d,a&&h.setAttribute("nonce",a),document.head.appendChild(h),l)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return r.then(o=>{for(const c of o||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},z={error:0,warn:1,info:2,debug:3,trace:4};class Me{constructor(e,t={}){this.category=e,this.prefix=`[${e}]`,this.level=t.level!==void 0?t.level:this.detectLogLevel(),this.performance=t.performance??!0,this.timestamps=t.timestamps??!1}detectLogLevel(){var s;if(typeof window>"u")return z.warn;const e=((s=window.location)==null?void 0:s.hostname)||"",t=e&&e!=="localhost"&&e!=="127.0.0.1"&&!e.startsWith("192.168.");return new URLSearchParams(window.location.search).get("debug")==="true"||(localStorage==null?void 0:localStorage.getItem("iweb-debug"))==="true"?z.debug:t?z.error:z.warn}shouldLog(e){return z[e]<=this.level}formatMessage(e,t,...n){const r=[this.prefix];return this.timestamps&&r.push(`[${new Date().toISOString()}]`),r.push(t),{parts:r,args:n}}error(e,...t){if(!this.shouldLog("error"))return;const{parts:n,args:r}=this.formatMessage("error",e,...t);console.error(...n,...r)}warn(e,...t){if(!this.shouldLog("warn"))return;const{parts:n,args:r}=this.formatMessage("warn",e,...t);console.warn(...n,...r)}info(e,...t){if(!this.shouldLog("info"))return;const{parts:n,args:r}=this.formatMessage("info",e,...t);console.info(...n,...r)}debug(e,...t){if(!this.shouldLog("debug"))return;const{parts:n,args:r}=this.formatMessage("debug",e,...t);console.debug(...n,...r)}trace(e,...t){if(!this.shouldLog("trace"))return;const{parts:n,args:r}=this.formatMessage("trace",e,...t);console.trace(...n,...r)}time(e){!this.performance||!this.shouldLog("debug")||console.time(`${this.prefix} ${e}`)}timeEnd(e){!this.performance||!this.shouldLog("debug")||console.timeEnd(`${this.prefix} ${e}`)}group(e){this.shouldLog("debug")&&console.group(`${this.prefix} ${e}`)}groupEnd(){this.shouldLog("debug")&&console.groupEnd()}table(e){this.shouldLog("debug")&&console.table(e)}}function w(i,e){return new Me(i,e)}const Oe=i=>new Promise(e=>setTimeout(e,i));function Dt(i,e,t={}){const{leading:n=!1,trailing:r=!0}=t;let s=null,o=0;const c=function(...a){const d=Date.now(),l=d-o,f=()=>{o=d,i.apply(this,a)};clearTimeout(s),n&&l>e&&f(),r&&(s=setTimeout(()=>{(!n||l<=e)&&f()},e))};return c.cancel=()=>{clearTimeout(s),s=null},c}function Mt(i,e=250,t={}){const{leading:n=!0,trailing:r=!0}=t;let s=!1,o=null,c=null;const a=function(...d){s?r&&(o=d):(n&&i.apply(this,d),s=!0,setTimeout(()=>{s=!1,r&&o&&(i.apply(this,o),o=null)},e))};return a.cancel=()=>{clearTimeout(c),s=!1,o=null},a}function T(i){return i?document.getElementById(i):null}function ve(i,e={once:!0}){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i,e):i()}function M(i={}){const{rel:e="",href:t="",as:n,crossOrigin:r,dataset:s={},id:o,attrs:c={},onload:a}=i;if(!t||!e)return null;try{const d=n?`link[rel="${e}"][href="${t}"][as="${n}"]`:`link[rel="${e}"][href="${t}"]`;let l=document.head.querySelector(d);return l||(l=document.createElement("link"),l.rel=e,l.href=t,n&&(l.as=n),r&&(l.crossOrigin=r),o&&(l.id=o),Object.entries(s||{}).forEach(([f,h])=>{l&&(l.dataset[f]=h)}),Object.entries(c||{}).forEach(([f,h])=>{l&&l.setAttribute(f,h)}),typeof a=="function"&&l&&(l.onload=a),document.head.appendChild(l),l)}catch{return null}}function Ot(i,e,t=!1){if(!e)return null;try{const n=t?`meta[property="${i}"]`:`meta[name="${i}"]`;let r=document.head.querySelector(n);return r?(r.setAttribute("content",e),r):(r=document.createElement("meta"),r.setAttribute(t?"property":"name",i),r.setAttribute("content",e),document.head.appendChild(r),r)}catch{return null}}const Re="https://www.abdulkerimsesli.de",Be="http://localhost:8080",Z={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},fe={BASE_URL:Re,GTM_ID:"GTM-5F5ZSTTL",GA4_ID:"G-757KWG0PG4",AW_ID:"AW-1036079663",AW_LABEL:"AW-CONV-LABEL",YOUTUBE_API_KEY:"",YOUTUBE_CHANNEL_ID:"UCTGRherjM4iuIn86xxubuPg",YOUTUBE_CHANNEL_HANDLE:"aks.030"},ke={BASE_URL:Be,GTM_ID:"GT-TQTFN4NN",GA4_ID:"G-S0587RQ4CN",AW_ID:"AW-17819941793",AW_LABEL:"AW-CONV-LABEL-DEV"};function B(i){var t,n,r;return Z!=null&&Z[`VITE_${i}`]?Z[`VITE_${i}`]:typeof window<"u"&&((t=window.__ENV__)!=null&&t[i])?window.__ENV__[i]:typeof window<"u"&&(((n=window.location)==null?void 0:n.hostname)==="localhost"||((r=window.location)==null?void 0:r.hostname)==="127.0.0.1")&&ke[i]||fe[i]}const U={BASE_URL:B("BASE_URL"),GTM_ID:B("GTM_ID"),GA4_ID:B("GA4_ID"),AW_ID:B("AW_ID"),AW_LABEL:B("AW_LABEL"),YOUTUBE_API_KEY:B("YOUTUBE_API_KEY"),YOUTUBE_CHANNEL_ID:B("YOUTUBE_CHANNEL_ID"),YOUTUBE_CHANNEL_HANDLE:B("YOUTUBE_CHANNEL_HANDLE"),get isDev(){var i,e;return typeof window<"u"&&(((i=window.location)==null?void 0:i.hostname)==="localhost"||((e=window.location)==null?void 0:e.hostname)==="127.0.0.1")},get isProd(){return!this.isDev&&!this.isPreview},get isPreview(){var i,e,t,n;return typeof window<"u"&&(((e=(i=window.location)==null?void 0:i.hostname)==null?void 0:e.endsWith(".pages.dev"))||((n=(t=window.location)==null?void 0:t.hostname)==null?void 0:n.endsWith(".netlify.app")))}};function xe(){const e=["BASE_URL"].filter(t=>!U[t]);if(e.length>0)throw new Error(`Missing required environment variables: ${e.join(", ")}`)}if(U.isProd)try{xe()}catch(i){console.error("[ENV] Validation failed:",i)}const L=w("ResourceHints");class Pe{constructor(){this.hints=new Map,this.initialized=!1}preconnect(e,t={}){const{crossOrigin:n=!0}=t;if(!this.hints.has(`preconnect:${e}`))try{M({rel:"preconnect",href:e,crossOrigin:n?"anonymous":void 0,dataset:{injectedBy:"resource-hints"}}),this.hints.set(`preconnect:${e}`,{type:"preconnect",origin:e}),L.info(`Preconnect added: ${e}`)}catch(r){L.error(`Failed to add preconnect for ${e}:`,r)}}dnsPrefetch(e){if(!this.hints.has(`dns-prefetch:${e}`))try{M({rel:"dns-prefetch",href:e,dataset:{injectedBy:"resource-hints"}}),this.hints.set(`dns-prefetch:${e}`,{type:"dns-prefetch",origin:e}),L.info(`DNS prefetch added: ${e}`)}catch(t){L.error(`Failed to add DNS prefetch for ${e}:`,t)}}preload(e,t={}){const{as:n="script",type:r,crossOrigin:s=!0}=t;if(!this.hints.has(`preload:${e}`))try{M({rel:"preload",href:e,as:n,crossOrigin:s?"anonymous":void 0,dataset:{injectedBy:"resource-hints"},attrs:r?{type:r}:{}}),this.hints.set(`preload:${e}`,{type:"preload",href:e,as:n}),L.info(`Preload added: ${e} (as: ${n})`)}catch(o){L.error(`Failed to add preload for ${e}:`,o)}}prefetch(e,t={}){const{as:n="document"}=t;if(!this.hints.has(`prefetch:${e}`))try{M({rel:"prefetch",href:e,as:n,dataset:{injectedBy:"resource-hints"}}),this.hints.set(`prefetch:${e}`,{type:"prefetch",href:e,as:n}),L.info(`Prefetch added: ${e}`)}catch(r){L.error(`Failed to add prefetch for ${e}:`,r)}}modulePreload(e){if(!this.hints.has(`modulepreload:${e}`))try{M({rel:"modulepreload",href:e,crossOrigin:"anonymous",dataset:{injectedBy:"resource-hints"}}),this.hints.set(`modulepreload:${e}`,{type:"modulepreload",href:e}),L.info(`Module preload added: ${e}`)}catch(t){L.error(`Failed to add modulepreload for ${e}:`,t)}}initCommonHints(){this.initialized||(this.preconnect("https://cdn.jsdelivr.net"),this.preconnect("https://esm.sh"),this.dnsPrefetch("https://www.google-analytics.com"),this.dnsPrefetch("https://www.googletagmanager.com"),this.initialized=!0,L.info("Common resource hints initialized"))}getHints(){return Array.from(this.hints.values())}clear(){this.hints.clear(),this.initialized=!1}}let re=null;function G(){return re||(re=new Pe),re}const q={preconnect:(i,e)=>G().preconnect(i,e),dnsPrefetch:i=>G().dnsPrefetch(i),preload:(i,e)=>G().preload(i,e),prefetch:(i,e)=>G().prefetch(i,e),modulePreload:i=>G().modulePreload(i),init:()=>G().initCommonHints()},u=w("head-inline"),_=U.GTM_ID,x=U.GA4_ID,He=U.AW_ID,Ne=U.AW_LABEL,W=globalThis.dataLayer=globalThis.dataLayer||[];function ee(){W.push(arguments)}try{ee("consent","default",{ad_storage:"denied",analytics_storage:"denied",ad_user_data:"denied",ad_personalization:"denied"})}catch{}const ze=()=>{try{const i=W.push.bind(W);W.push=(...e)=>{try{e.forEach(t=>{if((t==null?void 0:t.event)==="consentGranted")try{ee("consent","update",{ad_storage:"granted",analytics_storage:"granted",ad_user_data:"granted",ad_personalization:"granted"})}catch{}})}catch{}return i(...e)}}catch{}};ze();ee("js",Date.now());W.push({gtm_autoconfig:!0,ads_conversion_id:He,ads_conversion_label:Ne,ga4_measurement_id:x,gtm_id:_});const Ge=()=>{var i,e;try{if(!x||x.indexOf("G-")!==0)return;if(_&&_!=="GTM-PLACEHOLDER"){(i=u==null?void 0:u.info)==null||i.call(u,"GTM present â€” configure GA4 inside GTM instead of direct gtag load");return}if(!document.querySelector(`script[src*="gtag/js?id=${x}"]`)){const t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+x,document.head.appendChild(t)}ee("config",x)}catch(t){(e=u==null?void 0:u.warn)==null||e.call(u,"head-inline: GA4 fallback failed",t)}};Ge();const je=()=>{var i,e;try{if(!_||_==="GTM-PLACEHOLDER"){(i=u==null?void 0:u.info)==null||i.call(u,"GTM not configured â€” set GTM_ID in content/config/site-config.js to enable");return}globalThis.dataLayer=globalThis.dataLayer||[],globalThis.dataLayer.push({"gtm.start":Date.now(),event:"gtm.js"});const t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.async=!0,n.src=`https://www.googletagmanager.com/gtm.js?id=${_}&l=dataLayer`,t.parentNode.insertBefore(n,t)}catch(t){(e=u==null?void 0:u.warn)==null||e.call(u,"head-inline: GTM injection failed",t)}};je();const Fe=()=>{var i;try{if(!_||_==="GTM-PLACEHOLDER")return;const e=()=>{var t,n;try{if(document.getElementById("gtm-noscript"))return;const r=document.createElement("noscript");r.id="gtm-noscript",r.innerHTML=`<iframe title="Google Tag Manager (noscript)" src="https://www.googletagmanager.com/ns.html?id=${_}" height="0" width="0" style="display:none;visibility:hidden"></iframe>`,(t=document.body)!=null&&t.firstChild?document.body.insertBefore(r,document.body.firstChild):document.body&&document.body.appendChild(r)}catch(r){(n=u==null?void 0:u.warn)==null||n.call(u,"head-inline: insert noscript failed",r)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}catch(e){(i=u==null?void 0:u.warn)==null||i.call(u,"head-inline: GTM noscript setup failed",e)}};Fe();const Ue=()=>{var i;try{const e=()=>{let t=document.querySelector("site-menu");if(!t){let r=document.querySelector("header.site-header");r||(r=document.createElement("header"),r.className="site-header",document.body.insertBefore(r,document.body.firstChild));const s=document.getElementById("menu-container");s&&s.remove(),t=document.createElement("site-menu"),t.dataset.injectedBy="head-inline",r.appendChild(t)}let n=document.querySelector("site-footer");if(!n){const r=document.getElementById("footer-container");r&&r.remove(),n=document.createElement("site-footer"),n.setAttribute("id","site-footer-component"),document.body.appendChild(n)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):globalThis.queueMicrotask(e)}catch(e){(i=u==null?void 0:u.warn)==null||i.call(u,"head-inline: ensure footer/trigger setup failed",e)}};Ue();const qe=()=>{var i;try{const e=()=>{var l;const a=(((l=globalThis.location)==null?void 0:l.pathname)||"").replace(/\/+$/g,"")||"/",d=["/content/styles/root.css","/content/styles/main.css","/content/styles/animations.css"];return a==="/"?d.concat(["/pages/home/hero.css","/content/components/typewriter/typewriter.css","/content/components/particles/three-earth.css","/pages/home/section3.css"]):a.includes("/projekte")?d.concat(["/content/components/particles/three-earth.css"]):d},t=[{src:"/content/main.js",module:!0,preload:!1},{src:"/content/components/menu/menu.js",module:!0},{src:"/content/components/footer/SiteFooter.js",module:!0}],n=()=>{var a;try{(l=>{globalThis.requestIdleCallback?requestIdleCallback(l,{timeout:2e3}):setTimeout(l,1500)})(()=>{o({src:"/content/components/robot-companion/robot-companion.js",module:!0})})}catch(d){(a=u==null?void 0:u.warn)==null||a.call(u,"head-inline: deferNonCriticalAssets failed",d)}},r=(a,{critical:d=!1}={})=>{if(!document.head.querySelector(`link[href="${a}"]`)){if(d){M({rel:"stylesheet",href:a,dataset:{injectedBy:"head-inline"}});return}M({rel:"preload",href:a,as:"style",dataset:{injectedBy:"head-inline"},onload(){try{this.onload=null,this.rel="stylesheet"}catch{}}}),setTimeout(()=>{try{const l=document.head.querySelector(`link[href="${a}"]`);(!l||l.rel==="preload")&&M({rel:"stylesheet",href:a,dataset:{injectedBy:"head-inline"}})}catch{}},2e3)}},s=a=>{document.head.querySelector(`link[rel="modulepreload"][href="${a}"]`)||M({rel:"modulepreload",href:a,crossOrigin:"anonymous",dataset:{injectedBy:"head-inline"}})},o=({src:a,module:d})=>{if(!document.head.querySelector(`script[src="${a}"]`)){const l=document.createElement("script");l.src=a,d?(l.type="module",l.crossOrigin="anonymous"):l.defer=!0,l.dataset.injectedBy="head-inline",document.head.appendChild(l)}},c=()=>{var m,p;_&&_!=="GTM-PLACEHOLDER"&&(q.preconnect("https://www.googletagmanager.com"),q.preconnect("https://static.cloudflareinsights.com")),x&&x.indexOf("G-")===0&&q.preconnect("https://www.gstatic.com"),q.preconnect("https://cdn.jsdelivr.net"),q.preconnect("https://esm.sh");const d=e(),l=(((m=globalThis.location)==null?void 0:m.pathname)||"").replace(/\/+$/g,"")||"/",f=new Set(["/content/styles/root.css","/content/styles/main.css"]),h=new Set(["/pages/home/hero.css","/content/components/typewriter/typewriter.css","/content/components/particles/three-earth.css","/pages/home/section3.css"]);d.forEach(g=>{const K=f.has(g)||l==="/"&&h.has(g);r(g,{critical:K})}),t.filter(g=>g.preload).forEach(g=>s(g.src)),t.forEach(o);try{n()}catch(g){(p=u==null?void 0:u.warn)==null||p.call(u,"head-inline: deferNonCriticalAssets call failed",g)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c,{once:!0}):c()}catch(e){(i=u==null?void 0:u.warn)==null||i.call(u,"head-inline: injectCoreAssets failed",e)}};qe();const $e=()=>{var i;try{const e=()=>{document.querySelectorAll("img:not([loading])").forEach(t=>t.setAttribute("loading","lazy")),document.querySelectorAll("img:not([decoding])").forEach(t=>t.setAttribute("decoding","async")),document.querySelectorAll("iframe:not([loading])").forEach(t=>t.setAttribute("loading","lazy"))};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}catch(e){(i=u==null?void 0:u.warn)==null||i.call(u,"head-inline: addLazyLoadingDefaults failed",e)}};$e();const Ve=()=>{var i;try{const e=()=>{document.querySelectorAll('link[href*="fonts.googleapis.com"]').forEach(t=>{try{t.href.includes("display=swap")||(t.href+=(t.href.includes("?")?"&":"?")+"display=swap")}catch{}})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}catch(e){(i=u==null?void 0:u.warn)==null||i.call(u,"head-inline: ensureFontDisplaySwap failed",e)}};Ve();const We=()=>{var i;try{const e=globalThis.location.href.split("#")[0].split("?")[0];if(!document.head.querySelector('link[rel="canonical"]')){const t=document.createElement("link");t.rel="canonical",t.href=e,t.dataset.injectedBy="head-inline",t.dataset.early="true",document.head.appendChild(t)}}catch(e){(i=u==null?void 0:u.warn)==null||i.call(u,"head-inline: setEarlyCanonical failed",e)}};We();const Ye=()=>{var i,e;try{if(((((i=globalThis.location)==null?void 0:i.pathname)||"").replace(/\/+$|^$/,"")||"/")!=="/"||document.head.querySelector("#hero-critical-css"))return;const n=`
  .hero{display:flex;align-items:center;justify-content:center;min-height:100dvh;padding:0 .5rem;box-sizing:border-box}
  .hero__title{font:800 clamp(3rem,6vw,4.5rem)/1.03 var(--font-inter);margin:0;padding:8px 12px;max-width:30ch;color:var(--color-text-main,#fff);text-align:center;white-space:normal}
  `,r=document.createElement("style");r.id="hero-critical-css",r.dataset.injectedBy="head-inline",r.appendChild(document.createTextNode(n)),document.head.appendChild(r)}catch(t){(e=u==null?void 0:u.warn)==null||e.call(u,"head-inline: injectHeroCriticalCSS failed",t)}};Ye();const Qe=()=>{try{const i=(navigator.userAgent||"").toLowerCase(),e=/(bot|googlebot|bingbot|slurp|duckduckgo|baiduspider|yandex|facebookexternalhit|embedly|twitterbot)/i.test(i),t=/\s*(?:[â€”â€“-]\s*Abdulkerim Sesli|\|\s*Abdulkerim Sesli|Abdulkerim\s*â€”\s*Digital Creator Portfolio)\s*$/i,n=a=>String(a||"").replace(t,"").trim(),r={videos:"Videos ðŸŽ¬",video:"Videos ðŸŽ¬",projekte:"Projekte ðŸ’¼",projekt:"Projekte ðŸ’¼",blog:"Blog âœï¸",start:"Startseite ðŸ ",startseite:"Startseite ðŸ ",kontakt:"Kontakt âœ‰ï¸",impressum:"Impressum â„¹ï¸",datenschutz:"Datenschutz ðŸ”’",home:"Startseite ðŸ "},s=a=>{try{if(!a)return"";const d=a.toLowerCase();for(const[f,h]of Object.entries(r))if(d.includes(f))return h;const l=String(a).split(/[â€”â€“\-|:]/)[0].trim().split(/\s+/)[0]||"";return l?l.charAt(0).toUpperCase()+l.slice(1)+" ðŸŒ":""}catch{return""}};if(!e){const a=n(document.title);document.title=a;const d=s(a);d&&(document.title=d)}try{const a=document.querySelector("title");a&&!e&&new MutationObserver(()=>{const d=document.title,l=n(d),h=s(l)||l;h!==d&&(document.title=h)}).observe(a,{childList:!0,characterData:!0,subtree:!0})}catch{}const o=()=>{document.querySelectorAll("h1,h2,.section-title,.section-header,.page-title,.site-title").forEach(a=>{if(!(a!=null&&a.textContent))return;const d=n(a.textContent);d!==a.textContent&&(a.textContent=d)})};o(),new MutationObserver(a=>{var l;let d=!1;for(const f of a)if((l=f.addedNodes)!=null&&l.length){d=!0;break}d&&o()}).observe(document.documentElement||document.body,{childList:!0,subtree:!0})}catch{}};Qe();globalThis.__HEAD_INLINE_READY=!0;J(()=>import("./head-manager-BglIZMD3.js"),[]).catch(i=>{u.error("[head-inline] Failed to load head-manager.js:",i)});function Ke(i,e={}){const t=new IntersectionObserver(i,e);return{observe:n=>t.observe(n),unobserve:n=>t.unobserve(n),disconnect:()=>t.disconnect(),raw:t}}function le(i,e,t={}){if(!i)return()=>{};const n=new IntersectionObserver((r,s)=>{for(const o of r)if(o.isIntersecting){try{e(o)}finally{s.disconnect()}break}},t);return n.observe(i),()=>n.disconnect()}const j=w("LanguageManager");class Ze extends EventTarget{constructor(){super(),this.currentLang="de",this.translations={de:null,en:null},this.initialized=!1,this.loadingPromise=null}async init(){if(!this.initialized)return this.loadingPromise?this.loadingPromise:(this.loadingPromise=(async()=>{let e=localStorage.getItem("app_language");e||(e=navigator.language.slice(0,2)==="de"?"de":"en"),["de","en"].includes(e)||(e="de"),this.currentLang=e,await this.loadTranslations(this.currentLang),this.initialized=!0,document.documentElement.lang=this.currentLang==="de"?"de-DE":"en-US",j.info(`Initialized with language: ${this.currentLang}`),this.translatePage(),this.updateMetadata(),this.dispatchEvent(new CustomEvent("language-changed",{detail:{lang:this.currentLang}}))})().finally(()=>{this.loadingPromise=null}),this.loadingPromise)}async loadTranslations(e){if(!this.translations[e])try{const t=await fetch(`/content/config/locales/${e}.json`);if(!t.ok)throw new Error(`Failed to load ${e} translations`);this.translations[e]=await t.json(),j.debug(`Loaded translations for ${e}`)}catch(t){j.error(`Error loading translations for ${e}`,t);const n="de";if(e!==n){try{await this.loadTranslations(n)}catch{}this.translations[e]=this.translations[n]||{}}else this.translations[e]={}}}async setLanguage(e){if(e!==this.currentLang){if(!["de","en"].includes(e)){j.warn(`Unsupported language: ${e}`);return}j.info(`Switching language to ${e}`),await this.loadTranslations(e),this.currentLang=e,localStorage.setItem("app_language",e),document.documentElement.lang=e==="de"?"de-DE":"en-US",this.translatePage(),this.updateMetadata(),this.dispatchEvent(new CustomEvent("language-changed",{detail:{lang:this.currentLang}}))}}toggleLanguage(){const e=this.currentLang==="de"?"en":"de";this.setLanguage(e)}t(e,t={}){if(!this.translations[this.currentLang])return e;const n=e.split(".");let r=this.translations[this.currentLang];for(const s of n)if(r&&typeof r=="object"&&s in r)r=r[s];else return e;return typeof r!="string"?e:r.replace(/\{\{(\w+)\}\}/g,(s,o)=>t[o]!==void 0?t[o]:`{{${o}}}`)}translatePage(){this.translateElement(document.body)}translateElement(e){var s,o,c;if(!e)return;const t=e.querySelectorAll?Array.from(e.querySelectorAll("[data-i18n]")):[];(s=e.hasAttribute)!=null&&s.call(e,"data-i18n")&&t.push(e),t.forEach(a=>{const d=a.getAttribute("data-i18n");d&&(a.textContent=this.t(d))});const n=e.querySelectorAll?Array.from(e.querySelectorAll("[data-i18n-html]")):[];(o=e.hasAttribute)!=null&&o.call(e,"data-i18n-html")&&n.push(e),n.forEach(a=>{const d=a.getAttribute("data-i18n-html");d&&(a.innerHTML=this.t(d))});const r=e.querySelectorAll?Array.from(e.querySelectorAll("[data-i18n-attrs]")):[];(c=e.hasAttribute)!=null&&c.call(e,"data-i18n-attrs")&&r.push(e),r.forEach(a=>{const d=a.getAttribute("data-i18n-attrs");if(!d)return;d.split(",").forEach(f=>{const[h,m]=f.split(":").map(p=>p.trim());h&&m&&a.setAttribute(h,this.t(m))})})}updateMetadata(){const e=this.t("meta.title");e!=="meta.title"&&(document.title=e);const t=document.querySelector('meta[name="description"]'),n=this.t("meta.description");t&&n!=="meta.description"&&t.setAttribute("content",n)}subscribe(e){this.addEventListener("language-changed",t=>{e(t.detail.lang)}),this.initialized&&e(this.currentLang)}}const E=new Ze;typeof window<"u"&&E.init().catch(i=>j.error("Failed to auto-init i18n",i));let v=null;const P=w("HeroManager");class Xe{constructor(){this.timers=new Set,this.intervals=new Set}setTimeout(e,t){const n=setTimeout(()=>{this.timers.delete(n),e()},t);return this.timers.add(n),n}setInterval(e,t){const n=setInterval(e,t);return this.intervals.add(n),n}clearTimeout(e){clearTimeout(e),this.timers.delete(e)}clearInterval(e){clearInterval(e),this.intervals.delete(e)}clearAll(){this.timers.forEach(clearTimeout),this.intervals.forEach(clearInterval),this.timers.clear(),this.intervals.clear()}}const $=new Xe,me=6e3,Je=3,et=900,V=(()=>{let i=null,e=!1,t=null,n=null,r=!1,s=null,o=0;async function c(m){try{if(v||(v=await J(()=>import("./TypeWriter-hY2wtW-Q.js"),[]).catch(g=>(P.warn("Failed to import TypeWriter module",g),null))),!(v!=null&&v.initHeroSubtitle))return!1;const p=await v.initHeroSubtitle({heroDataModule:m});if(p)return p}catch(p){P.warn("Failed to load TypeWriter modules",p)}return!1}function a(){if(e)return;s||(s=async()=>{if(r)return;r=!0;const g=await d().catch(()=>({}));await c(g),l(),e=!0});const m=T("hero")||document.querySelector("section#hero");if(!m){o<Je?(o+=1,$.setTimeout(a,et*o)):$.setTimeout(s,me);return}o=0;const p=m.getBoundingClientRect();if(p.top<innerHeight&&p.bottom>0){s();return}n=le(m,s),$.setTimeout(s,me)}const d=async()=>i||(i=await J(()=>import("./GrussText-D-hj55bU.js"),[]).catch(m=>(P.warn("Failed to load GrussText.js",m),{})));async function l(){var g,K;const m=[0,50,120,240,480];let p=null;for(const b of m)if(b&&await new Promise(te=>$.setTimeout(te,b)),p=T("greetingText"),p)break;if(p)try{const b=await d(),te=((g=b.getGreetingSet)==null?void 0:g.call(b,new Date,E.currentLang))??[],ne=((K=b.pickGreeting)==null?void 0:K.call(b,p.dataset.last,te))??"";if(!ne)return;p.dataset.last=ne,p.textContent=ne}catch(b){P.warn("Error setting greeting text",b)}}function f(){var m;$.clearAll(),e=!1,r=!1,s=null,o=0;try{(m=v==null?void 0:v.stopHeroSubtitle)==null||m.call(v)}catch(p){P.warn("HeroManager: stopHeroSubtitle failed",p)}if(t&&(document.removeEventListener("click",t),t=null),n){try{n.disconnect()}catch(p){P.warn("HeroManager: observer disconnect failed",p)}n=null}}function h(m){t&&document.removeEventListener("click",t),t=m,document.addEventListener("click",m)}return{initLazyHeroModules:a,setRandomGreetingHTML:l,ensureHeroData:d,cleanup:f,setClickHandler:h}})(),tt=i=>{V.cleanup();const e=()=>{var r;const n=T("greetingText");n&&(!n.textContent.trim()||n.textContent.trim()==="Willkommen")&&(V.setRandomGreetingHTML(),(r=window.announce)==null||r.call(window,"Hero Bereich bereit."))};document.removeEventListener("hero:loaded",e),document.addEventListener("hero:loaded",e,{once:!0}),document.addEventListener("hero:initReady",()=>{const n=T("greetingText");n!=null&&n.textContent.trim()||V.setRandomGreetingHTML()},{once:!0}),document.addEventListener("hero:typingEnd",n=>{var r,s;(s=window.announce)==null||s.call(window,`Zitat vollstÃ¤ndig: ${((r=n.detail)==null?void 0:r.text)??"Text"}`)}),V.initLazyHeroModules();const t=n=>{const r=n.target.closest('.hero__buttons a[href^="#"]');if(!r)return;const s=r.getAttribute("href")||"";if(!s.startsWith("#"))return;n.preventDefault();const o=s.slice(1),c=T(o)||document.getElementById(o);if(!c)return;const a=()=>{try{c.scrollIntoView({behavior:"smooth"})}catch(d){P.warn("HeroManager: scrollIntoView failed, using fallback",d);const l=c.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:l,behavior:"smooth"})}};i!=null&&i.loadSection?i.loadSection(c).finally(()=>requestAnimationFrame(a)):requestAnimationFrame(a)};V.setClickHandler(t)},Se=w("Events"),H=Object.freeze({DOM_READY:"app:domReady",CORE_INITIALIZED:"app:coreInitialized",MODULES_READY:"app:modulesReady",APP_READY:"app:ready",LOADING_UNBLOCKED:"app:loadingUnblocked",LOADING_HIDE:"app:loaderHide",HERO_INIT_READY:"app:heroInitReady",HERO_LOADED:"hero:loaded",HERO_TYPING_END:"hero:typingEnd",FEATURES_TEMPLATES_LOADED:"featuresTemplatesLoaded",FEATURES_TEMPLATES_ERROR:"featuresTemplatesError",TEMPLATE_MOUNTED:"template:mounted",FEATURES_CHANGE:"features:change",SW_UPDATE_AVAILABLE:"sw:updateAvailable",SW_INSTALLED:"sw:installed",SW_ACTIVATED:"sw:activated",SECTION_LOADED:"section:loaded",SECTION_CHANGE:"section:change",FOOTER_LOADED:"footer:loaded",FOOTER_EXPANDED:"footer:expanded",FOOTER_COLLAPSED:"footer:collapsed"});class nt{constructor(){this.listeners=new Map}on(e,t,n={}){this.listeners.has(e)||this.listeners.set(e,new Set);const r={callback:t,options:n};return this.listeners.get(e).add(r),()=>this.off(e,t)}once(e,t){return this.on(e,t,{once:!0})}off(e,t){const n=this.listeners.get(e);if(n){for(const r of n)if(r.callback===t){n.delete(r);break}n.size===0&&this.listeners.delete(e)}}emit(e,t){const n=this.listeners.get(e);if(n)for(const r of[...n])try{r.callback(t),r.options.once&&n.delete(r)}catch(s){Se.error(`Error in event listener for ${e}:`,s)}}clear(e){e?this.listeners.delete(e):this.listeners.clear()}listenerCount(e){var t;return e?((t=this.listeners.get(e))==null?void 0:t.size)||0:Array.from(this.listeners.values()).reduce((n,r)=>n+r.size,0)}}const rt=new nt;function O(i,e=null,t=document){if(t!=null&&t.dispatchEvent)try{t.dispatchEvent(new CustomEvent(i,{detail:e,bubbles:!0})),rt.emit(i,e)}catch(n){Se.error(`Failed to dispatch event: ${i}`,n)}}class it{constructor(){this.focusTrapStack=[],this.lastFocusedElement=null,this.reducedMotionMQL=window.matchMedia("(prefers-reduced-motion: reduce)"),this.highContrastMQL=window.matchMedia("(prefers-contrast: more)"),this.reducedMotion=this.reducedMotionMQL.matches,this.highContrast=this.highContrastMQL.matches,this._initialized=!1,this.init()}init(){if(!this._initialized){try{this._onReducedMotionChange=e=>{this.reducedMotion=e.matches,this.updateAnimations()},this.reducedMotionMQL.addEventListener("change",this._onReducedMotionChange),this._onHighContrastChange=e=>{this.highContrast=e.matches,this.updateContrast()},this.highContrastMQL.addEventListener("change",this._onHighContrastChange)}catch{try{this._onReducedMotionChange=e=>{this.reducedMotion=e.matches,this.updateAnimations()},this.reducedMotionMQL.addListener(this._onReducedMotionChange),this._onHighContrastChange=e=>{this.highContrast=e.matches,this.updateContrast()},this.highContrastMQL.addListener(this._onHighContrastChange)}catch{}}this.setupKeyboardNav(),this.setupSkipLinks(),this.updateAnimations(),this.updateContrast(),this._initialized=!0}}destroy(){try{this._onReducedMotionChange&&(this.reducedMotionMQL.removeEventListener?this.reducedMotionMQL.removeEventListener("change",this._onReducedMotionChange):this.reducedMotionMQL.removeListener&&this.reducedMotionMQL.removeListener(this._onReducedMotionChange),this._onReducedMotionChange=null)}catch{}try{this._onHighContrastChange&&(this.highContrastMQL.removeEventListener?this.highContrastMQL.removeEventListener("change",this._onHighContrastChange):this.highContrastMQL.removeListener&&this.highContrastMQL.removeListener(this._onHighContrastChange),this._onHighContrastChange=null)}catch{}try{this._onKeyboardNav&&document.removeEventListener("keydown",this._onKeyboardNav)}catch{}try{this._skipRemovers&&this._skipRemovers.length&&this._skipRemovers.forEach(e=>e())}catch{}}setupKeyboardNav(){this._onKeyboardNav=e=>{e.key==="Escape"&&this.handleEscape(),e.key==="Tab"&&this.focusTrapStack.length>0&&this.handleTabInTrap(e)},document.addEventListener("keydown",this._onKeyboardNav)}setupSkipLinks(){const e=document.querySelectorAll(".skip-link");this._skipRemovers=[],e.forEach(t=>{const n=r=>{r.preventDefault();const s=t.getAttribute("href");if(!s)return;const o=document.querySelector(s);o&&(o.setAttribute("tabindex","-1"),o.focus(),o.addEventListener("blur",()=>{try{o.removeAttribute("tabindex")}catch{}},{once:!0}))};t.addEventListener("click",n),this._skipRemovers.push(()=>t.removeEventListener("click",n))})}trapFocus(e){if(!e)return;const t=e.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])');if(!t||t.length===0)return;const n=t[0],r=t[t.length-1];this.lastFocusedElement=document.activeElement;const s={container:e,firstFocusable:n,lastFocusable:r};this.focusTrapStack.push(s);try{n.focus({preventScroll:!0})}catch{try{n.focus()}catch{}}}releaseFocus(){if(this.focusTrapStack.pop()&&this.lastFocusedElement)try{this.lastFocusedElement.focus({preventScroll:!0})}catch{try{this.lastFocusedElement.focus()}catch{}}}handleTabInTrap(e){if(this.focusTrapStack.length===0)return;const t=this.focusTrapStack[this.focusTrapStack.length-1];e.shiftKey?document.activeElement===t.firstFocusable&&(e.preventDefault(),t.lastFocusable.focus()):document.activeElement===t.lastFocusable&&(e.preventDefault(),t.firstFocusable.focus())}handleEscape(){const e=document.querySelector(".footer-cookie-settings:not(.hidden)");if(e){const n=e.querySelector(".cookie-settings-close");n&&n.click();return}const t=document.getElementById("site-footer");if(t&&t.classList.contains("footer-expanded"))try{document.dispatchEvent(new CustomEvent("footer:requestClose"))}catch{}}updateAnimations(){this.reducedMotion&&(document.documentElement.style.setProperty("--transition-fast","0s"),document.documentElement.style.setProperty("--transition-base","0s"),document.documentElement.style.setProperty("--transition-smooth","0s"),document.documentElement.style.setProperty("--transition-slow","0s"))}updateContrast(){this.highContrast?document.body.classList.add("high-contrast"):document.body.classList.remove("high-contrast")}announce(e,{priority:t="polite",clearPrevious:n=!0}={}){if(!e)return;if(typeof(window==null?void 0:window.announce)=="function")try{window.announce(e,{assertive:t==="assertive"});return}catch{}const r=t==="assertive"?document.getElementById("live-region-assertive"):document.getElementById("live-region-status");r&&(n&&(r.textContent=""),setTimeout(()=>{try{r.textContent=e}catch{}},100))}}const S=new it;window.a11y=S;function st(){const i=new Map;return(e,{assertive:t=!1,dedupe:n=!1}={})=>{if(e&&!(n&&i.has(e))){n&&(i.set(e,!0),setTimeout(()=>i.delete(e),3e3));try{const r=t?"live-region-assertive":"live-region-status",s=document.getElementById(r);if(!s)return;s.textContent="",requestAnimationFrame(()=>{s.textContent=e})}catch{}}}}const C=w("Cache");class ot{constructor(e=100){this.cache=new Map,this.maxSize=e}get(e){const t=this.cache.get(e);return t?t.expires&&t.expires<Date.now()?(this.cache.delete(e),null):t.value:null}set(e,t,n=3e5){if(this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,{value:t,expires:n?Date.now()+n:null})}delete(e){return this.cache.delete(e)}clear(){this.cache.clear()}get size(){return this.cache.size}}class at{constructor(e="app-cache",t=1){this.dbName=e,this.version=t,this.db=null}async init(){return this.db?this.db:new Promise((e,t)=>{const n=globalThis.indexedDB.open(this.dbName,this.version);n.onerror=()=>t(n.error),n.onsuccess=()=>{this.db=n.result,e(this.db)},n.onupgradeneeded=r=>{const s=r.target.result;s.objectStoreNames.contains("cache")||s.createObjectStore("cache",{keyPath:"key"})}})}async get(e){try{return await this.init(),new Promise((t,n)=>{const o=this.db.transaction(["cache"],"readonly").objectStore("cache").get(e);o.onsuccess=()=>{const c=o.result;if(!c){t(null);return}if(c.expires&&c.expires<Date.now()){this.delete(e),t(null);return}t(c.value)},o.onerror=()=>n(o.error)})}catch(t){return C.warn("IndexedDB get failed:",t),null}}async set(e,t,n=36e5){try{return await this.init(),new Promise((r,s)=>{const a=this.db.transaction(["cache"],"readwrite").objectStore("cache").put({key:e,value:t,expires:n?Date.now()+n:null,created:Date.now()});a.onsuccess=()=>r(!0),a.onerror=()=>s(a.error)})}catch(r){return C.warn("IndexedDB set failed:",r),!1}}async delete(e){try{return await this.init(),new Promise((t,n)=>{const o=this.db.transaction(["cache"],"readwrite").objectStore("cache").delete(e);o.onsuccess=()=>t(!0),o.onerror=()=>n(o.error)})}catch(t){return C.warn("IndexedDB delete failed:",t),!1}}async clear(){try{return await this.init(),new Promise((e,t)=>{const s=this.db.transaction(["cache"],"readwrite").objectStore("cache").clear();s.onsuccess=()=>e(!0),s.onerror=()=>t(s.error)})}catch(e){return C.warn("IndexedDB clear failed:",e),!1}}}class ct{constructor(e={}){this.memory=new ot(e.memorySize||100),this.idb=new at(e.dbName,e.dbVersion),this.useIndexedDB=e.useIndexedDB??!0}async get(e){const t=this.memory.get(e);if(t!==null)return C.debug(`Cache hit (memory): ${e}`),t;if(this.useIndexedDB){const n=await this.idb.get(e);if(n!==null)return C.debug(`Cache hit (IndexedDB): ${e}`),this.memory.set(e,n),n}return C.debug(`Cache miss: ${e}`),null}async set(e,t,n={}){const{ttl:r=3e5,persistent:s=!1}=n;this.memory.set(e,t,r),s&&this.useIndexedDB&&await this.idb.set(e,t,r),C.debug(`Cache set: ${e}`)}async delete(e){this.memory.delete(e),this.useIndexedDB&&await this.idb.delete(e),C.debug(`Cache deleted: ${e}`)}async clear(){this.memory.clear(),this.useIndexedDB&&await this.idb.clear(),C.info("Cache cleared")}getStats(){return{memorySize:this.memory.size,memoryMaxSize:this.memory.maxSize}}}let ie=null;function dt(i){return ie||(ie=new ct(i)),ie}const se=w("Fetch"),pe=dt({memorySize:100});async function lt(i,e={}){const{timeout:t=8e3,retries:n=3,retryDelay:r=1e3,cache:s=!1,cacheTTL:o=3e5,fetchOptions:c={}}=e;if(s){const d=await pe.get(i);if(d)return se.debug(`Cache hit: ${i}`),d.clone()}let a;for(let d=0;d<=n;d++){const l=new AbortController,f=setTimeout(()=>l.abort(),t);try{const h=await fetch(i,{...c,signal:l.signal,credentials:c.credentials||"same-origin"});if(clearTimeout(f),!h.ok)throw new Error(`HTTP ${h.status}: ${h.statusText}`);return s&&await pe.set(i,h.clone(),{ttl:o}),h}catch(h){if(clearTimeout(f),a=h,h.name==="AbortError"||h.message&&h.message.includes("HTTP 4"))break;d<n&&(se.warn(`Fetch attempt ${d+1} failed, retrying...`,h),await Oe(r*(d+1)))}}throw se.error(`Fetch failed after ${n+1} attempts:`,a),a}async function ge(i,e={}){return(await lt(i,e)).text()}const oe=w("SectionManager");class ut{constructor(){this.loadedSections=new WeakSet}async loadSection(e){if(this.loadedSections.has(e)){oe.debug(`Section already loaded: ${e.id}`);return}const t=e.dataset.sectionSrc;if(t){this.loadedSections.add(e),e.setAttribute("aria-busy","true");try{let n;try{n=await ge(t)}catch{n=await ge(t+".html")}const r=Array.from(e.children);r.length>0&&(oe.debug(`Section ${e.id}: clearing ${r.length} existing elements`),r.forEach(o=>o.remove())),e.insertAdjacentHTML("beforeend",n);const s=e.querySelector("template");s&&e.appendChild(s.content.cloneNode(!0)),e.removeAttribute("aria-busy"),E.translateElement(e),e.id==="hero"&&O(H.HERO_LOADED),document.dispatchEvent(new CustomEvent("section:loaded",{detail:{id:e.id}}))}catch(n){oe.warn(`Section load failed: ${e.id}`,n),e.removeAttribute("aria-busy")}}}init(){if(this._initialized)return;this._initialized=!0;const e=Array.from(document.querySelectorAll("section[data-section-src]")),t=e.filter(r=>r.dataset.eager!==void 0),n=e.filter(r=>r.dataset.eager===void 0);if(t.forEach(r=>this.loadSection(r)),n.length){const r=Ke(s=>{s.forEach(o=>{o.isIntersecting&&this.loadSection(o.target)})},{rootMargin:"100px"});n.forEach(s=>r.observe(s))}}reinit(){this._initialized=!1,this.loadedSections=new WeakSet,this.init()}async retrySection(e){this.loadedSections.delete(e),await this.loadSection(e)}}const Y=w("GlobalLoader"),ce={LOADING_HIDE:"loading:hide",LOADING_SHOW:"loading:show",LOADING_UPDATE:"loading:update"};let F=null,de=0;const ht=5e3;function Te(){const i=Date.now();if(F&&i-de<ht)return F;const e=document.getElementById("app-loader"),t=document.getElementById("loader-status-text"),n=document.getElementById("loader-progress-bar"),r=document.getElementById("loader-percentage");return!e||!t||!n||!r?(F=null,null):(F={overlay:e,statusText:t,progressBar:n,percentage:r},de=i,F)}function ye(){F=null,de=0}function I(i,e,t={}){try{const n=Te();if(!n)return;const{statusText:r,progressBar:s,percentage:o}=n,c=Math.round(Math.max(0,Math.min(100,i*100)));r&&r.textContent!==e&&(r.textContent=e);const a=`${c}%`;s&&s.style.width!==a&&(s.style.width=a),o&&o.textContent!==a&&(o.textContent=a),O(ce.LOADING_UPDATE,{progress:c,message:e}),t.silent||Y.debug(`Loader: ${c}% - ${e}`)}catch(n){Y.warn("Could not update loader:",n)}}function Ae(i=0,e={}){try{const t=Te();if(!t)return;const{overlay:n}=t;setTimeout(()=>{if(e.immediate){n.style.display="none",n.setAttribute("aria-hidden","true"),n.dataset.loaderDone="true",document.body.classList.remove("global-loading-visible"),O(ce.LOADING_HIDE),globalThis.dispatchEvent(new Event("app-ready")),ye(),Y.debug("Loader hidden (immediate)");return}n.classList.add("fade-out"),n.setAttribute("aria-hidden","true"),n.removeAttribute("aria-live"),n.dataset.loaderDone="true",setTimeout(()=>{n.style.display="none",document.body.classList.remove("global-loading-visible"),ye()},800),O(ce.LOADING_HIDE),globalThis.dispatchEvent(new Event("app-ready")),Y.debug("Loader hidden")},i)}catch(t){Y.warn("Could not hide loader:",t)}}const k=w("ThreeEarthManager");class ft{constructor(e){this.env=e,this.cleanupFn=null,this.isLoading=!1}getContainer(){return T("threeEarthContainer")||T("earth-container")}async load(){var t;if(this.isLoading||this.cleanupFn)return;if(this.env.isTest&&!globalThis.__FORCE_THREE_EARTH){k.info("Test environment - skipping Three.js Earth");return}if(!this.getContainer()){k.debug("Earth container not found");return}if((t=navigator.connection)!=null&&t.saveData){k.info("Three.js skipped: save-data mode");return}this.isLoading=!0;try{k.info("Loading Three.js Earth system...");const{initThreeEarth:n}=await J(async()=>{const{initThreeEarth:r}=await import("./three-earth-system-DQKGFLO2.js");return{initThreeEarth:r}},[]);if(typeof n!="function")throw new Error("initThreeEarth not found in module exports");this.cleanupFn=await n(),typeof this.cleanupFn=="function"&&(globalThis.__threeEarthCleanup=this.cleanupFn,k.info("Three.js Earth system initialized"))}catch(n){k.warn("Three.js failed, using CSS fallback:",n);const r=globalThis.__appLoadManager;r&&r.unblock("three-earth")}finally{this.isLoading=!1}}init(){var t,n;const e=this.getContainer();if(e){try{const r=e.getBoundingClientRect(),s=r.top<(globalThis.innerHeight||0)+100&&r.bottom>-100,o=((n=(t=T("app-loader"))==null?void 0:t.dataset)==null?void 0:n.loaderDone)!=="true";if(s||o){this.load();return}}catch{}le(e,()=>this.load(),{rootMargin:"400px",threshold:.01})}}initDelayed(){(globalThis.requestIdleCallback||setTimeout)(()=>this.init(),{timeout:2e3})}cleanup(){if(this.cleanupFn)try{this.cleanupFn(),this.cleanupFn=null,k.info("Three.js Earth cleaned up")}catch(e){k.warn("Cleanup failed:",e)}}}const N=w("ImageOptimizer"),R=(()=>{const i={};return async e=>{if(i[e]!==void 0)return i[e];const t={avif:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",webp:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="};return t[e]?new Promise(n=>{const r=new Image;r.onload=()=>{i[e]=r.width===1,n(i[e])},r.onerror=()=>{i[e]=!1,n(!1)},r.src=t[e]}):(i[e]=!1,!1)}})();async function Q(i,e={}){const{width:t,quality:n=85,format:r="auto"}=e;if(i.includes("unsplash.com")){const s=new URL(i);if(t&&s.searchParams.set("w",t),s.searchParams.set("q",n),r==="auto"){const o=await R("avif"),c=await R("webp");o?s.searchParams.set("fm","avif"):c&&s.searchParams.set("fm","webp")}else r!=="original"&&s.searchParams.set("fm",r);return s.toString()}if(r==="auto"){const s=await R("avif"),o=await R("webp");if(s){const c=i.replace(/\.(jpg|jpeg|png)$/i,".avif");if(await Ee(c))return c}if(o){const c=i.replace(/\.(jpg|jpeg|png)$/i,".webp");if(await Ee(c))return c}}return i}async function Ee(i){try{return(await fetch(i,{method:"HEAD"})).ok}catch{return!1}}async function mt(i){const{src:e,alt:t="",sizes:n="100vw",widths:r=[320,640,960,1280,1920],loading:s="lazy",fetchpriority:o="auto",className:c="",aspectRatio:a}=i,d=document.createElement("picture");if(await R("avif")){const m=document.createElement("source");m.type="image/avif",m.srcset=await ae(e,r,"avif"),m.sizes=n,d.appendChild(m)}if(await R("webp")){const m=document.createElement("source");m.type="image/webp",m.srcset=await ae(e,r,"webp"),m.sizes=n,d.appendChild(m)}const h=document.createElement("img");return h.src=await Q(e,{width:r[2]}),h.srcset=await ae(e,r),h.sizes=n,h.alt=t,h.loading=s,h.decoding="async",o!=="auto"&&(h.fetchPriority=o),c&&(h.className=c),a&&(h.style.aspectRatio=a),d.appendChild(h),d}async function ae(i,e,t){return(await Promise.all(e.map(async r=>`${await Q(i,{width:r,format:t})} ${r}w`))).join(", ")}function _e(i,e={}){const{rootMargin:t="50px",threshold:n=.01,placeholder:r="blur"}=e;let s;typeof i=="string"?s=Array.from(document.querySelectorAll(i)):i instanceof NodeList||Array.isArray(i)?s=Array.from(i):s=[i];const o=s.filter(c=>c instanceof HTMLElement?c.dataset.loaded!=="true":!1);o.length!==0&&o.forEach(c=>{const a=c;r==="blur"&&!a.style.filter&&(a.style.filter="blur(10px)",a.style.transition="filter 0.3s ease-out"),le(a,async d=>{const l=d.target;try{if(l.dataset.src){const f=await Q(l.dataset.src);l.src=f}else if(!l.src){N.warn("Image has no src or data-src attribute");return}l.dataset.srcset&&(l.srcset=l.dataset.srcset),await new Promise((f,h)=>{l.onload=f,l.onerror=h,setTimeout(h,1e4)}),r==="blur"&&(l.style.filter="none"),l.dataset.loaded="true",l.classList.add("loaded"),N.debug(`Image loaded: ${l.src}`)}catch(f){N.error("Failed to load image:",f),l.dataset.loaded="error",r==="blur"&&(l.style.filter="none")}},{rootMargin:t,threshold:n})})}function pt(i,e={}){const t=document.querySelector(i);if(!t){N.warn(`Container not found: ${i}`);return}const n=t.querySelectorAll('img[data-src], img[loading="lazy"]');if(n.length===0){N.debug(`No lazy images found in ${i}`);return}N.info(`Lazy loading ${n.length} images in ${i}`),_e(Array.from(n).filter(r=>r instanceof HTMLElement),e)}async function gt(i,e={}){const{as:t="image",fetchpriority:n="high"}=e,r=i.map(async s=>{const o=await Q(s),c=document.createElement("link");c.rel="preload",c.as=t,c.href=o,c.fetchPriority=n;const a=await R("avif"),d=await R("webp");a?c.type="image/avif":d&&(c.type="image/webp"),document.head.appendChild(c),N.debug(`Preloading image: ${o}`)});await Promise.all(r)}const we={getOptimizedImageUrl:Q,createResponsiveImage:mt,lazyLoadImages:_e,lazyLoadImagesInContainer:pt,preloadImages:gt,checkFormatSupport:R},be=w("ImageLoaderHelper");async function yt(i={}){const{autoOptimize:e=!0,preloadCritical:t=!0}=i;if(e){if(be.info("Initializing image optimization..."),document.readyState==="loading"&&await new Promise(n=>{document.addEventListener("DOMContentLoaded",n,{once:!0})}),t){const n=document.querySelectorAll('img[fetchpriority="high"]');if(n.length>0){const r=Array.from(n).map(s=>s.src||s.dataset.src).filter(Boolean);await we.preloadImages(r)}}we.lazyLoadImagesInContainer("body",i),be.info("Image optimization initialized")}}const A=w("main"),At=(i=2500)=>{try{setTimeout(async()=>{if(navigator!=null&&navigator.storage)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch(e){A.warn("Persistent storage request failed:",e)}},i)}catch{}},y=(()=>{const i=new Set;return{block(e){e&&(i.add(e),A.debug(`Blocked: ${e}`))},unblock(e){e&&(i.delete(e),A.debug(`Unblocked: ${e}`),i.size===0&&O(H.LOADING_UNBLOCKED))},isBlocked(){return i.size>0},getPending(){return Array.from(i)}}})();globalThis.__appLoadManager=y;const Et=50,wt=4e3,bt=2200,Lt={threshold:[.1,.3,.5,.7],rootMargin:"-10% 0px -10% 0px"};class vt{constructor(){this.sections=[],this.sectionRatios=new Map,this.currentSectionId=null,this.observer=null,this.refreshHandler=null}init(){ve(()=>this.setupObserver()),this.refreshHandler=()=>setTimeout(()=>this.refreshSections(),Et),document.addEventListener("section:loaded",this.refreshHandler),document.addEventListener("footer:loaded",this.refreshHandler)}setupObserver(){this.refreshSections(),!(!window.IntersectionObserver||this.sections.length===0)&&(this.observer=new IntersectionObserver(e=>this.handleIntersections(e),Lt),this.sections.forEach(e=>{this.observer&&this.observer.observe(e)}),typeof window.requestIdleCallback=="function"?requestIdleCallback(()=>this.checkInitialSection(),{timeout:1e3}):setTimeout(()=>this.checkInitialSection(),100))}refreshSections(){const e=Array.from(document.querySelectorAll("main .section[id], footer#site-footer[id]")),t=[];for(const n of e)n instanceof HTMLElement&&n.id&&t.push(n);t.length!==this.sections.length&&(this.sections=t,this.observer&&this.sections.forEach(n=>{this.observer&&this.observer.observe(n)}))}handleIntersections(e){var s;let t=!1;if(e.forEach(o=>{const c=o.target;if(c!=null&&c.id){const a=this.sectionRatios.get(c.id),d={ratio:o.intersectionRatio,isIntersecting:o.isIntersecting,target:c};(!a||a.ratio!==d.ratio||a.isIntersecting!==d.isIntersecting)&&(this.sectionRatios.set(c.id,d),t=!0)}}),!t)return;let n=null,r=0;for(const o of this.sections){if(!o||!o.id)continue;const c=this.sectionRatios.get(o.id);c&&c.isIntersecting&&c.ratio>r&&(r=c.ratio,n=c)}if(n&&((s=n.target)!=null&&s.id)){const o=n.target.id;o!==this.currentSectionId&&(this.currentSectionId=o,this.dispatchSectionChange(o))}}checkInitialSection(){const e=window.innerHeight/2;let t=null,n=1/0;for(const r of this.sections){if(!r)continue;const s=r.getBoundingClientRect(),o=s.top+s.height/2,c=Math.abs(o-e);c<n&&s.top<e&&s.bottom>e&&(n=c,t=r)}t!=null&&t.id&&t.id!==this.currentSectionId&&(this.currentSectionId=t.id,this.dispatchSectionChange(t.id))}dispatchSectionChange(e){try{const t=this.sections.findIndex(s=>s&&typeof s.id=="string"?s.id===e:!1),n=T(e),r={id:e,index:t,section:n};window.dispatchEvent(new CustomEvent("snapSectionChange",{detail:r})),A.debug(`Section changed: ${e}`)}catch(t){A.warn("Failed to dispatch section change:",t)}}updateCurrentSection(e){this.sections.find(n=>n&&typeof n.id=="string"?n.id===e:!1)&&(this.currentSectionId=e,this.dispatchSectionChange(e))}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.refreshHandler&&(document.removeEventListener("section:loaded",this.refreshHandler),document.removeEventListener("footer:loaded",this.refreshHandler),this.refreshHandler=null),this.sections=[],this.sectionRatios.clear(),this.currentSectionId=null}}const St={isTest:new URLSearchParams(globalThis.location.search).has("test")||navigator.userAgent.includes("HeadlessChrome")||globalThis.location.hostname==="localhost"&&globalThis.navigator.webdriver},D={start:performance.now(),domReady:0,modulesReady:0,windowLoaded:0},ue=st();globalThis.announce=ue;const Tt=new vt;Tt.init();const Ce=new ut;let Le=!1;const _t=()=>{var i,e;if(Le){A.debug("App already initialized, skipping duplicate init");return}Le=!0,Ce.init();try{(i=S==null?void 0:S.updateAnimations)==null||i.call(S),(e=S==null?void 0:S.updateContrast)==null||e.call(S)}catch{}};ve(_t);const Ct=new ft(St);let X=!1;const It={handleRetry(i){var t;if((t=i.target)!=null&&t.closest(".retry-btn")){i.preventDefault();try{globalThis.location.reload()}catch{}}},async handleShare(i){var r;const e=(r=i.target)==null?void 0:r.closest(".btn-share");if(!e)return;i.preventDefault();const t=e.dataset.shareUrl||"https://www.youtube.com/@aks.030",n={title:document.title,text:"Schau dir diesen Kanal an",url:t};if(navigator.share)try{await navigator.share(n)}catch(s){A.warn("share failed",s)}else if(navigator.clipboard)try{await navigator.clipboard.writeText(t),ue("Link kopiert",{dedupe:!0})}catch(s){A.warn("Copy failed",s)}else try{globalThis.prompt("Link kopieren",t)}catch(s){A.warn("prompt failed",s)}},handleClick(i){this.handleRetry(i),this.handleShare(i)}};document.addEventListener("DOMContentLoaded",async()=>{await E.init(),D.domReady=performance.now(),I(.1,E.t("loader.status_init")),O(H.DOM_READY);let i=!1,e=!1;const t=()=>{var s;const r=T("threeEarthContainer")||T("earth-container");return!r||((s=r==null?void 0:r.dataset)==null?void 0:s.threeReady)==="1"},n=()=>{var r,s,o;A.debug("checkReady called",{modulesReady:i,windowLoaded:e,isBlocked:(r=y==null?void 0:y.isBlocked)==null?void 0:r.call(y),isEarthReady:t(),pending:(s=y==null?void 0:y.getPending)==null?void 0:s.call(y)}),!(!i||!e)&&((o=y==null?void 0:y.isBlocked)!=null&&o.call(y)||t()&&(X||(X=!0,I(1,E.t("loader.ready_system")),setTimeout(()=>Ae(),100),ue("Anwendung geladen",{dedupe:!0}))))};document.addEventListener(H.LOADING_UNBLOCKED,n),globalThis.addEventListener("load",()=>{D.windowLoaded=performance.now(),e=!0,I(.7,E.t("loader.resources")),n()},{once:!0}),I(.2,E.t("loader.modules_core")),O(H.CORE_INITIALIZED),O(H.HERO_INIT_READY),I(.3,E.t("loader.hero_init")),tt(Ce),I(.4,E.t("loader.system_3d")),Ct.initDelayed(),I(.5,E.t("loader.optimize_images")),yt({autoOptimize:!0,preloadCritical:!0,lazyLoadSelector:'img[loading="lazy"]'}).catch(r=>{A.warn("Image optimization init failed:",r)}),i=!0,D.modulesReady=performance.now(),I(.6,E.t("loader.modules_loaded")),O(H.MODULES_READY),n(),setTimeout(()=>{X||(A.info("Forcing loading screen hide after timeout"),X=!0,I(1,E.t("loader.timeout")),Ae())},wt),At(bt);try{document.querySelectorAll('link[rel="stylesheet"][data-defer="1"]').forEach(r=>{const s=r;s.media="all";const o=r;delete o.dataset.defer})}catch{}document.addEventListener("click",r=>It.handleClick(r)),A.info("Performance:",{domReady:Math.round(D.domReady-D.start),modulesReady:Math.round(D.modulesReady-D.start),windowLoaded:Math.round(D.windowLoaded-D.start)})},{once:!0});globalThis.addEventListener("pageshow",i=>{i.persisted&&(A.info("Page restored from bfcache"),globalThis.dispatchEvent(new CustomEvent("resize")),!document.hidden&&globalThis.threeEarthSystem&&globalThis.threeEarthSystem.animate&&document.dispatchEvent(new CustomEvent("visibilitychange")))});export{Re as B,U as E,Ot as a,I as b,w as c,Ke as d,Dt as e,T as g,Mt as t,M as u};
