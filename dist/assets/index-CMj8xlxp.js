(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();const Pe="modulepreload",Be=function(i){return"/"+i},pe={},ee=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let o=function(l){return Promise.all(l.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),a=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=o(t.map(l=>{if(l=Be(l),l in pe)return;pe[l]=!0;const d=l.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Pe,d||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((g,p)=>{h.addEventListener("load",g),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return r.then(o=>{for(const c of o||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},G={error:0,warn:1,info:2,debug:3,trace:4};class xe{constructor(e,t={}){this.category=e,this.prefix=`[${e}]`,this.level=t.level!==void 0?t.level:this.detectLogLevel(),this.performance=t.performance??!0,this.timestamps=t.timestamps??!1}detectLogLevel(){var s;if(typeof window>"u")return G.warn;const e=((s=window.location)==null?void 0:s.hostname)||"",t=e&&e!=="localhost"&&e!=="127.0.0.1"&&!e.startsWith("192.168.");return new URLSearchParams(window.location.search).get("debug")==="true"||(localStorage==null?void 0:localStorage.getItem("iweb-debug"))==="true"?G.debug:t?G.error:G.warn}shouldLog(e){return G[e]<=this.level}formatMessage(e,t,...n){const r=[this.prefix];return this.timestamps&&r.push(`[${new Date().toISOString()}]`),r.push(t),{parts:r,args:n}}error(e,...t){if(!this.shouldLog("error"))return;const{parts:n,args:r}=this.formatMessage("error",e,...t);console.error(...n,...r)}warn(e,...t){if(!this.shouldLog("warn"))return;const{parts:n,args:r}=this.formatMessage("warn",e,...t);console.warn(...n,...r)}info(e,...t){if(!this.shouldLog("info"))return;const{parts:n,args:r}=this.formatMessage("info",e,...t);console.info(...n,...r)}debug(e,...t){if(!this.shouldLog("debug"))return;const{parts:n,args:r}=this.formatMessage("debug",e,...t);console.debug(...n,...r)}trace(e,...t){if(!this.shouldLog("trace"))return;const{parts:n,args:r}=this.formatMessage("trace",e,...t);console.trace(...n,...r)}time(e){!this.performance||!this.shouldLog("debug")||console.time(`${this.prefix} ${e}`)}timeEnd(e){!this.performance||!this.shouldLog("debug")||console.timeEnd(`${this.prefix} ${e}`)}group(e){this.shouldLog("debug")&&console.group(`${this.prefix} ${e}`)}groupEnd(){this.shouldLog("debug")&&console.groupEnd()}table(e){this.shouldLog("debug")&&console.table(e)}}function b(i,e){return new xe(i,e)}const Ne=i=>new Promise(e=>setTimeout(e,i));function Nt(i,e,t={}){const{leading:n=!1,trailing:r=!0}=t;let s=null,o=0;const c=function(...a){const l=Date.now(),d=l-o,f=()=>{o=l,i.apply(this,a)};clearTimeout(s),n&&d>e&&f(),r&&(s=setTimeout(()=>{(!n||d<=e)&&f()},e))};return c.cancel=()=>{clearTimeout(s),s=null},c}function Ht(i,e=250,t={}){const{leading:n=!0,trailing:r=!0}=t;let s=!1,o=null,c=null;const a=function(...l){s?r&&(o=l):(n&&i.apply(this,l),s=!0,setTimeout(()=>{s=!1,r&&o&&(i.apply(this,o),o=null)},e))};return a.cancel=()=>{clearTimeout(c),s=!1,o=null},a}function I(i){return i?document.getElementById(i):null}function _e(i,e={once:!0}){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i,e):i()}function R(i={}){const{rel:e="",href:t="",as:n,crossOrigin:r,dataset:s={},id:o,attrs:c={},onload:a}=i;if(!t||!e)return null;try{const l=n?`link[rel="${e}"][href="${t}"][as="${n}"]`:`link[rel="${e}"][href="${t}"]`;let d=document.head.querySelector(l);return d||(d=document.createElement("link"),d.rel=e,d.href=t,n&&(d.as=n),r&&(d.crossOrigin=r),o&&(d.id=o),Object.entries(s||{}).forEach(([f,h])=>{d&&(d.dataset[f]=h)}),Object.entries(c||{}).forEach(([f,h])=>{d&&d.setAttribute(f,h)}),typeof a=="function"&&d&&(d.onload=a),document.head.appendChild(d),d)}catch{return null}}function Ft(i,e,t=!1){if(!e)return null;try{const n=t?`meta[property="${i}"]`:`meta[name="${i}"]`;let r=document.head.querySelector(n);return r?(r.setAttribute("content",e),r):(r=document.createElement("meta"),r.setAttribute(t?"property":"name",i),r.setAttribute("content",e),document.head.appendChild(r),r)}catch{return null}}const He="https://www.abdulkerimsesli.de",Fe="http://localhost:8080",X={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},ge={BASE_URL:He,GTM_ID:"GTM-5F5ZSTTL",GA4_ID:"G-757KWG0PG4",AW_ID:"AW-1036079663",AW_LABEL:"AW-CONV-LABEL",YOUTUBE_API_KEY:"",YOUTUBE_CHANNEL_ID:"UCTGRherjM4iuIn86xxubuPg",YOUTUBE_CHANNEL_HANDLE:"aks.030"},ze={BASE_URL:Fe,GTM_ID:"GT-TQTFN4NN",GA4_ID:"G-S0587RQ4CN",AW_ID:"AW-17819941793",AW_LABEL:"AW-CONV-LABEL-DEV"};function x(i){var t,n,r;return X!=null&&X[`VITE_${i}`]?X[`VITE_${i}`]:typeof window<"u"&&((t=window.__ENV__)!=null&&t[i])?window.__ENV__[i]:typeof window<"u"&&(((n=window.location)==null?void 0:n.hostname)==="localhost"||((r=window.location)==null?void 0:r.hostname)==="127.0.0.1")&&ze[i]||ge[i]}const te={BASE_URL:x("BASE_URL"),GTM_ID:x("GTM_ID"),GA4_ID:x("GA4_ID"),AW_ID:x("AW_ID"),AW_LABEL:x("AW_LABEL"),YOUTUBE_API_KEY:x("YOUTUBE_API_KEY"),YOUTUBE_CHANNEL_ID:x("YOUTUBE_CHANNEL_ID"),YOUTUBE_CHANNEL_HANDLE:x("YOUTUBE_CHANNEL_HANDLE")},L=b("ResourceHints");class Ge{constructor(){this.hints=new Map,this.initialized=!1}preconnect(e,t={}){const{crossOrigin:n=!0}=t;if(!this.hints.has(`preconnect:${e}`))try{R({rel:"preconnect",href:e,crossOrigin:n?"anonymous":void 0,dataset:{injectedBy:"resource-hints"}}),this.hints.set(`preconnect:${e}`,{type:"preconnect",origin:e}),L.info(`Preconnect added: ${e}`)}catch(r){L.error(`Failed to add preconnect for ${e}:`,r)}}dnsPrefetch(e){if(!this.hints.has(`dns-prefetch:${e}`))try{R({rel:"dns-prefetch",href:e,dataset:{injectedBy:"resource-hints"}}),this.hints.set(`dns-prefetch:${e}`,{type:"dns-prefetch",origin:e}),L.info(`DNS prefetch added: ${e}`)}catch(t){L.error(`Failed to add DNS prefetch for ${e}:`,t)}}preload(e,t={}){const{as:n="script",type:r,crossOrigin:s=!0}=t;if(!this.hints.has(`preload:${e}`))try{R({rel:"preload",href:e,as:n,crossOrigin:s?"anonymous":void 0,dataset:{injectedBy:"resource-hints"},attrs:r?{type:r}:{}}),this.hints.set(`preload:${e}`,{type:"preload",href:e,as:n}),L.info(`Preload added: ${e} (as: ${n})`)}catch(o){L.error(`Failed to add preload for ${e}:`,o)}}prefetch(e,t={}){const{as:n="document"}=t;if(!this.hints.has(`prefetch:${e}`))try{R({rel:"prefetch",href:e,as:n,dataset:{injectedBy:"resource-hints"}}),this.hints.set(`prefetch:${e}`,{type:"prefetch",href:e,as:n}),L.info(`Prefetch added: ${e}`)}catch(r){L.error(`Failed to add prefetch for ${e}:`,r)}}modulePreload(e){if(!this.hints.has(`modulepreload:${e}`))try{R({rel:"modulepreload",href:e,crossOrigin:"anonymous",dataset:{injectedBy:"resource-hints"}}),this.hints.set(`modulepreload:${e}`,{type:"modulepreload",href:e}),L.info(`Module preload added: ${e}`)}catch(t){L.error(`Failed to add modulepreload for ${e}:`,t)}}initCommonHints(){this.initialized||(this.preconnect("https://cdn.jsdelivr.net"),this.preconnect("https://esm.sh"),this.dnsPrefetch("https://www.google-analytics.com"),this.dnsPrefetch("https://www.googletagmanager.com"),this.initialized=!0,L.info("Common resource hints initialized"))}getHints(){return Array.from(this.hints.values())}clear(){this.hints.clear(),this.initialized=!1}}let ie=null;function j(){return ie||(ie=new Ge),ie}const W={preconnect:(i,e)=>j().preconnect(i,e),dnsPrefetch:i=>j().dnsPrefetch(i),preload:(i,e)=>j().preload(i,e),prefetch:(i,e)=>j().prefetch(i,e),modulePreload:i=>j().modulePreload(i),init:()=>j().initCommonHints()},u=b("head-inline"),C=te.GTM_ID,N=te.GA4_ID,je=te.AW_ID,Ue=te.AW_LABEL,Y=globalThis.dataLayer=globalThis.dataLayer||[];function ne(){Y.push(arguments)}try{ne("consent","default",{ad_storage:"denied",analytics_storage:"denied",ad_user_data:"denied",ad_personalization:"denied"})}catch{}const $e=()=>{try{const i=Y.push.bind(Y);Y.push=(...e)=>{try{e.forEach(t=>{if((t==null?void 0:t.event)==="consentGranted")try{ne("consent","update",{ad_storage:"granted",analytics_storage:"granted",ad_user_data:"granted",ad_personalization:"granted"})}catch{}})}catch{}return i(...e)}}catch{}};$e();ne("js",Date.now());Y.push({gtm_autoconfig:!0,ads_conversion_id:je,ads_conversion_label:Ue,ga4_measurement_id:N,gtm_id:C});const qe=()=>{var i,e;try{if(!N||N.indexOf("G-")!==0)return;if(C&&C!=="GTM-PLACEHOLDER"){(i=u==null?void 0:u.info)==null||i.call(u,"GTM present â€” configure GA4 inside GTM instead of direct gtag load");return}if(!document.querySelector(`script[src*="gtag/js?id=${N}"]`)){const t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+N,document.head.appendChild(t)}ne("config",N)}catch(t){(e=u==null?void 0:u.warn)==null||e.call(u,"head-inline: GA4 fallback failed",t)}};qe();const We=()=>{var i,e;try{if(!C||C==="GTM-PLACEHOLDER"){(i=u==null?void 0:u.info)==null||i.call(u,"GTM not configured â€” set GTM_ID in content/config/site-config.js to enable");return}globalThis.dataLayer=globalThis.dataLayer||[],globalThis.dataLayer.push({"gtm.start":Date.now(),event:"gtm.js"});const t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.async=!0,n.src=`https://www.googletagmanager.com/gtm.js?id=${C}&l=dataLayer`,t.parentNode.insertBefore(n,t)}catch(t){(e=u==null?void 0:u.warn)==null||e.call(u,"head-inline: GTM injection failed",t)}};We();const Ve=()=>{var i;try{if(!C||C==="GTM-PLACEHOLDER")return;const e=()=>{var t,n;try{if(document.getElementById("gtm-noscript"))return;const r=document.createElement("noscript");r.id="gtm-noscript",r.innerHTML=`<iframe title="Google Tag Manager (noscript)" src="https://www.googletagmanager.com/ns.html?id=${C}" height="0" width="0" style="display:none;visibility:hidden"></iframe>`,(t=document.body)!=null&&t.firstChild?document.body.insertBefore(r,document.body.firstChild):document.body&&document.body.appendChild(r)}catch(r){(n=u==null?void 0:u.warn)==null||n.call(u,"head-inline: insert noscript failed",r)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}catch(e){(i=u==null?void 0:u.warn)==null||i.call(u,"head-inline: GTM noscript setup failed",e)}};Ve();const Ye=()=>{var i;try{const e=()=>{let t=document.querySelector("site-menu");if(!t){let r=document.querySelector("header.site-header");r||(r=document.createElement("header"),r.className="site-header",document.body.insertBefore(r,document.body.firstChild));const s=document.getElementById("menu-container");s&&s.remove(),t=document.createElement("site-menu"),t.dataset.injectedBy="head-inline",r.appendChild(t)}let n=document.querySelector("site-footer");if(!n){const r=document.getElementById("footer-container");r&&r.remove(),n=document.createElement("site-footer"),n.setAttribute("id","site-footer-component"),document.body.appendChild(n)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):globalThis.queueMicrotask(e)}catch(e){(i=u==null?void 0:u.warn)==null||i.call(u,"head-inline: ensure footer/trigger setup failed",e)}};Ye();const Qe=()=>{var i;try{const e=()=>{var d;const a=(((d=globalThis.location)==null?void 0:d.pathname)||"").replace(/\/+$/g,"")||"/",l=["/content/styles/root.css","/content/styles/main.css","/content/styles/animations.css"];return a==="/"?l.concat(["/pages/home/hero.css","/content/components/typewriter/typewriter.css","/content/components/particles/three-earth.css","/pages/home/section3.css","/pages/home/section4.css"]):l},t=[{src:"/content/main.js",module:!0,preload:!1},{src:"/content/components/menu/menu.js",module:!0},{src:"/content/components/footer/SiteFooter.js",module:!0}],n=()=>{var a;try{(d=>{globalThis.requestIdleCallback?requestIdleCallback(d,{timeout:2e3}):setTimeout(d,1500)})(()=>{o({src:"/content/components/robot-companion/robot-companion.js",module:!0})})}catch(l){(a=u==null?void 0:u.warn)==null||a.call(u,"head-inline: deferNonCriticalAssets failed",l)}},r=(a,{critical:l=!1}={})=>{if(!document.head.querySelector(`link[href="${a}"]`)){if(l){R({rel:"stylesheet",href:a,dataset:{injectedBy:"head-inline"}});return}R({rel:"preload",href:a,as:"style",dataset:{injectedBy:"head-inline"},onload(){try{this.onload=null,this.rel="stylesheet"}catch{}}}),setTimeout(()=>{try{const d=document.head.querySelector(`link[href="${a}"]`);(!d||d.rel==="preload")&&R({rel:"stylesheet",href:a,dataset:{injectedBy:"head-inline"}})}catch{}},2e3)}},s=a=>{document.head.querySelector(`link[rel="modulepreload"][href="${a}"]`)||R({rel:"modulepreload",href:a,crossOrigin:"anonymous",dataset:{injectedBy:"head-inline"}})},o=({src:a,module:l})=>{if(!document.head.querySelector(`script[src="${a}"]`)){const d=document.createElement("script");d.src=a,l?(d.type="module",d.crossOrigin="anonymous"):d.defer=!0,d.dataset.injectedBy="head-inline",document.head.appendChild(d)}},c=()=>{var g,p;C&&C!=="GTM-PLACEHOLDER"&&(W.preconnect("https://www.googletagmanager.com"),W.preconnect("https://static.cloudflareinsights.com")),N&&N.indexOf("G-")===0&&W.preconnect("https://www.gstatic.com"),W.preconnect("https://cdn.jsdelivr.net"),W.preconnect("https://esm.sh");const l=e(),d=(((g=globalThis.location)==null?void 0:g.pathname)||"").replace(/\/+$/g,"")||"/",f=new Set(["/content/styles/root.css","/content/styles/main.css"]),h=new Set(["/pages/home/hero.css","/content/components/typewriter/typewriter.css","/content/components/particles/three-earth.css","/pages/home/section3.css","/pages/home/section4.css"]);l.forEach(m=>{const B=f.has(m)||d==="/"&&h.has(m);r(m,{critical:B})}),t.filter(m=>m.preload).forEach(m=>s(m.src)),t.forEach(o);try{n()}catch(m){(p=u==null?void 0:u.warn)==null||p.call(u,"head-inline: deferNonCriticalAssets call failed",m)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c,{once:!0}):c()}catch(e){(i=u==null?void 0:u.warn)==null||i.call(u,"head-inline: injectCoreAssets failed",e)}};Qe();const Ke=()=>{var i;try{const e=()=>{document.querySelectorAll("img:not([loading])").forEach(t=>t.setAttribute("loading","lazy")),document.querySelectorAll("img:not([decoding])").forEach(t=>t.setAttribute("decoding","async")),document.querySelectorAll("iframe:not([loading])").forEach(t=>t.setAttribute("loading","lazy"))};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}catch(e){(i=u==null?void 0:u.warn)==null||i.call(u,"head-inline: addLazyLoadingDefaults failed",e)}};Ke();const Ze=()=>{var i;try{const e=()=>{document.querySelectorAll('link[href*="fonts.googleapis.com"]').forEach(t=>{try{t.href.includes("display=swap")||(t.href+=(t.href.includes("?")?"&":"?")+"display=swap")}catch{}})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}catch(e){(i=u==null?void 0:u.warn)==null||i.call(u,"head-inline: ensureFontDisplaySwap failed",e)}};Ze();const Xe=()=>{var i;try{const e=globalThis.location.href.split("#")[0].split("?")[0];if(!document.head.querySelector('link[rel="canonical"]')){const t=document.createElement("link");t.rel="canonical",t.href=e,t.dataset.injectedBy="head-inline",t.dataset.early="true",document.head.appendChild(t)}}catch(e){(i=u==null?void 0:u.warn)==null||i.call(u,"head-inline: setEarlyCanonical failed",e)}};Xe();const Je=()=>{var i,e;try{if(((((i=globalThis.location)==null?void 0:i.pathname)||"").replace(/\/+$|^$/,"")||"/")!=="/"||document.head.querySelector("#hero-critical-css"))return;const n=`
  .hero{display:flex;align-items:center;justify-content:center;min-height:100dvh;padding:0 .5rem;box-sizing:border-box}
  .hero__title{font:800 clamp(3rem,6vw,4.5rem)/1.03 var(--font-inter);margin:0;padding:8px 12px;max-width:30ch;color:var(--color-text-main,#fff);text-align:center;white-space:normal}
  `,r=document.createElement("style");r.id="hero-critical-css",r.dataset.injectedBy="head-inline",r.appendChild(document.createTextNode(n)),document.head.appendChild(r)}catch(t){(e=u==null?void 0:u.warn)==null||e.call(u,"head-inline: injectHeroCriticalCSS failed",t)}};Je();const et=()=>{try{const i=(navigator.userAgent||"").toLowerCase(),e=/(bot|googlebot|bingbot|slurp|duckduckgo|baiduspider|yandex|facebookexternalhit|embedly|twitterbot)/i.test(i),t=/\s*(?:[â€”â€“-]\s*Abdulkerim Sesli|\|\s*Abdulkerim Sesli|Abdulkerim\s*â€”\s*Digital Creator Portfolio)\s*$/i,n=a=>String(a||"").replace(t,"").trim(),r={videos:"Videos ðŸŽ¬",video:"Videos ðŸŽ¬",projekte:"Projekte ðŸ’¼",projekt:"Projekte ðŸ’¼",blog:"Blog âœï¸",start:"Startseite ðŸ ",startseite:"Startseite ðŸ ",kontakt:"Kontakt âœ‰ï¸",impressum:"Impressum â„¹ï¸",datenschutz:"Datenschutz ðŸ”’",home:"Startseite ðŸ "},s=a=>{try{if(!a)return"";const l=a.toLowerCase();for(const[f,h]of Object.entries(r))if(l.includes(f))return h;const d=String(a).split(/[â€”â€“\-|:]/)[0].trim().split(/\s+/)[0]||"";return d?d.charAt(0).toUpperCase()+d.slice(1)+" ðŸŒ":""}catch{return""}};if(!e){const a=n(document.title);document.title=a;const l=s(a);l&&(document.title=l)}try{const a=document.querySelector("title");a&&!e&&new MutationObserver(()=>{const l=document.title,d=n(l),h=s(d)||d;h!==l&&(document.title=h)}).observe(a,{childList:!0,characterData:!0,subtree:!0})}catch{}const o=()=>{document.querySelectorAll("h1,h2,.section-title,.section-header,.page-title,.site-title").forEach(a=>{if(!(a!=null&&a.textContent))return;const l=n(a.textContent);l!==a.textContent&&(a.textContent=l)})};o(),new MutationObserver(a=>{var d;let l=!1;for(const f of a)if((d=f.addedNodes)!=null&&d.length){l=!0;break}l&&o()}).observe(document.documentElement||document.body,{childList:!0,subtree:!0})}catch{}};et();globalThis.__HEAD_INLINE_READY=!0;ee(()=>import("./head-manager-IQezjLjp.js"),[]).catch(i=>{u.error("[head-inline] Failed to load head-manager.js:",i)});function tt(i,e={}){const t=new IntersectionObserver(i,e);return{observe:n=>t.observe(n),unobserve:n=>t.unobserve(n),disconnect:()=>t.disconnect(),raw:t}}function Ie(i,e,t={}){if(!i)return()=>{};const n=new IntersectionObserver((r,s)=>{for(const o of r)if(o.isIntersecting){try{e(o)}finally{s.disconnect()}break}},t);return n.observe(i),()=>n.disconnect()}const $=b("LanguageManager");class nt extends EventTarget{constructor(){super(),this.currentLang="de",this.translations={de:null,en:null},this.initialized=!1,this.loadingPromise=null}async init(){if(!this.initialized)return this.loadingPromise?this.loadingPromise:(this.loadingPromise=(async()=>{let e=localStorage.getItem("app_language");e||(e=navigator.language.slice(0,2)==="de"?"de":"en"),["de","en"].includes(e)||(e="de"),this.currentLang=e,await this.loadTranslations(this.currentLang),this.initialized=!0,document.documentElement.lang=this.currentLang==="de"?"de-DE":"en-US",$.info(`Initialized with language: ${this.currentLang}`),typeof document<"u"&&(document.readyState!=="loading"&&document.body?(this.translatePage(),this.updateMetadata()):typeof window<"u"&&window.addEventListener("DOMContentLoaded",()=>{this.translatePage(),this.updateMetadata()},{once:!0})),this.dispatchEvent(new CustomEvent("language-changed",{detail:{lang:this.currentLang}}))})().finally(()=>{this.loadingPromise=null}),this.loadingPromise)}async loadTranslations(e){if(!this.translations[e])try{const t=await fetch(`/content/config/locales/${e}.json`);if(!t.ok)throw new Error(`Failed to load ${e} translations`);this.translations[e]=await t.json(),$.debug(`Loaded translations for ${e}`)}catch(t){$.error(`Error loading translations for ${e}`,t);const n="de";if(e!==n){try{await this.loadTranslations(n)}catch{}this.translations[e]=this.translations[n]||{}}else this.translations[e]={}}}async setLanguage(e){if(e!==this.currentLang){if(!["de","en"].includes(e)){$.warn(`Unsupported language: ${e}`);return}$.info(`Switching language to ${e}`),await this.loadTranslations(e),this.currentLang=e,localStorage.setItem("app_language",e),document.documentElement.lang=e==="de"?"de-DE":"en-US",this.translatePage(),this.updateMetadata(),this.dispatchEvent(new CustomEvent("language-changed",{detail:{lang:this.currentLang}}))}}toggleLanguage(){const e=this.currentLang==="de"?"en":"de";this.setLanguage(e)}t(e,t={}){if(!this.translations[this.currentLang])return e;const n=e.split(".");let r=this.translations[this.currentLang];for(const s of n)if(r&&typeof r=="object"&&s in r)r=r[s];else return e;return typeof r!="string"?e:r.replace(/\{\{(\w+)\}\}/g,(s,o)=>t[o]!==void 0?t[o]:`{{${o}}}`)}translatePage(){this.translateElement(document.body)}translateElement(e){var s,o,c;if(!e)return;const t=e.querySelectorAll?Array.from(e.querySelectorAll("[data-i18n]")):[];(s=e.hasAttribute)!=null&&s.call(e,"data-i18n")&&t.push(e),t.forEach(a=>{const l=a.getAttribute("data-i18n");l&&(a.textContent=this.t(l))});const n=e.querySelectorAll?Array.from(e.querySelectorAll("[data-i18n-html]")):[];(o=e.hasAttribute)!=null&&o.call(e,"data-i18n-html")&&n.push(e),n.forEach(a=>{const l=a.getAttribute("data-i18n-html");l&&(a.innerHTML=this.t(l))});const r=e.querySelectorAll?Array.from(e.querySelectorAll("[data-i18n-attrs]")):[];(c=e.hasAttribute)!=null&&c.call(e,"data-i18n-attrs")&&r.push(e),r.forEach(a=>{const l=a.getAttribute("data-i18n-attrs");if(!l)return;l.split(",").forEach(f=>{const[h,g]=f.split(":").map(p=>p.trim());h&&g&&a.setAttribute(h,this.t(g))})})}updateMetadata(){const e=this.t("meta.title");e!=="meta.title"&&(document.title=e);const t=document.querySelector('meta[name="description"]'),n=this.t("meta.description");t&&n!=="meta.description"&&t.setAttribute("content",n)}subscribe(e){this.addEventListener("language-changed",t=>{e(t.detail.lang)}),this.initialized&&e(this.currentLang)}}const y=new nt;typeof window<"u"&&y.init().catch(i=>$.error("Failed to auto-init i18n",i));const se=b("TimerUtils");class rt{constructor(e="TimerManager"){this.name=e,this.timers=new Set,this.intervals=new Set,this.rafIds=new Set}setTimeout(e,t){const n=setTimeout(()=>{this.timers.delete(n);try{e()}catch(r){se.error(`[${this.name}] setTimeout error:`,r)}},t);return this.timers.add(n),n}setInterval(e,t){const n=setInterval(()=>{try{e()}catch(r){se.error(`[${this.name}] setInterval error:`,r)}},t);return this.intervals.add(n),n}requestAnimationFrame(e){const t=requestAnimationFrame(()=>{this.rafIds.delete(t);try{e()}catch(n){se.error(`[${this.name}] RAF error:`,n)}});return this.rafIds.add(t),t}clearTimeout(e){clearTimeout(e),this.timers.delete(e)}clearInterval(e){clearInterval(e),this.intervals.delete(e)}cancelAnimationFrame(e){cancelAnimationFrame(e),this.rafIds.delete(e)}clearAll(){this.timers.forEach(e=>clearTimeout(e)),this.intervals.forEach(e=>clearInterval(e)),this.rafIds.forEach(e=>cancelAnimationFrame(e)),this.timers.clear(),this.intervals.clear(),this.rafIds.clear()}get activeTimers(){return{timeouts:this.timers.size,intervals:this.intervals.size,rafs:this.rafIds.size,total:this.timers.size+this.intervals.size+this.rafIds.size}}}const it={HERO_TYPING_END:"hero:typingEnd"};let T=null;const F=b("HeroManager"),V=new rt("HeroTimers"),ye=6e3,st=3,ot=900,U=(()=>{let i=null,e=!1,t=null,n=null,r=!1,s=null,o=0,c=null;async function a(p){try{if(T||(T=await ee(()=>import("./TypeWriter-BRR7h6pf.js"),[]).catch(B=>(F.warn("Failed to import TypeWriter module",B),null))),!(T!=null&&T.initHeroSubtitle))return!1;const m=await T.initHeroSubtitle({heroDataModule:p});if(m)return m}catch(m){F.warn("Failed to load TypeWriter modules",m)}return!1}function l(){if(e)return;s||(s=async()=>{if(r)return;r=!0;const B=await d().catch(()=>({}));await a(B),f(),e=!0});const p=I("hero")||document.querySelector("section#hero");if(!p){o<st?(o+=1,V.setTimeout(l,ot*o)):V.setTimeout(s,ye);return}o=0;const m=p.getBoundingClientRect();if(m.top<innerHeight&&m.bottom>0){s();return}n=Ie(p,s),V.setTimeout(s,ye)}const d=async()=>i||(i=await ee(()=>import("./GrussText-D4EV-nwN.js"),[]).catch(p=>(F.warn("Failed to load GrussText.js",p),{})));async function f(){var B,me;const p=[0,50,120,240,480];let m=null;for(const v of p)if(v&&await new Promise(re=>V.setTimeout(re,v)),m=I("greetingText"),m)break;if(m)try{const v=await d(),re=((B=v.getGreetingSet)==null?void 0:B.call(v,new Date,y.currentLang))??[],Z=((me=v.pickGreeting)==null?void 0:me.call(v,m.dataset.last,re))??"";if(!Z)return;m.dataset.last=Z,m.textContent=Z,m.dataset.text=Z}catch(v){F.warn("Error setting greeting text",v)}}function h(){var p;V.clearAll(),e=!1,r=!1,s=null,o=0;try{(p=T==null?void 0:T.stopHeroSubtitle)==null||p.call(T)}catch(m){F.warn("HeroManager: stopHeroSubtitle failed",m)}if(t&&(document.removeEventListener("click",t),t=null),c&&(y.removeEventListener("language-changed",c),c=null),n){try{n.disconnect()}catch(m){F.warn("HeroManager: observer disconnect failed",m)}n=null}}function g(p){t&&document.removeEventListener("click",t),t=p,document.addEventListener("click",p)}return{initLazyHeroModules:l,setRandomGreetingHTML:f,ensureHeroData:d,cleanup:h,setClickHandler:g,setupLanguageListener:()=>{c&&y.removeEventListener("language-changed",c),c=()=>{f()},y.addEventListener("language-changed",c)}}})(),at=i=>{U.cleanup();const e=()=>{var r;const n=I("greetingText");n&&(!n.textContent.trim()||n.textContent.trim()==="Willkommen")&&(U.setRandomGreetingHTML(),(r=window.announce)==null||r.call(window,"Hero Bereich bereit."))};document.removeEventListener("hero:loaded",e),document.addEventListener("hero:loaded",e,{once:!0}),document.addEventListener("hero:initReady",()=>{const n=I("greetingText");n!=null&&n.textContent.trim()||U.setRandomGreetingHTML()},{once:!0}),document.addEventListener(it.HERO_TYPING_END,n=>{var s;const r=n.detail;(s=window.announce)==null||s.call(window,`Zitat vollstÃ¤ndig: ${(r==null?void 0:r.text)??"Text"}`)}),U.setupLanguageListener(),U.initLazyHeroModules();const t=n=>{const r=n.target.closest('.hero__buttons a[href^="#"]');if(!r)return;const s=r.getAttribute("href")||"";if(!s.startsWith("#"))return;n.preventDefault();const o=s.slice(1),c=I(o)||document.getElementById(o);if(!c)return;const a=()=>{try{c.scrollIntoView({behavior:"smooth"})}catch(l){F.warn("HeroManager: scrollIntoView failed, using fallback",l);const d=c.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:d,behavior:"smooth"})}};i!=null&&i.loadSection?i.loadSection(c).finally(()=>requestAnimationFrame(a)):requestAnimationFrame(a)};U.setClickHandler(t)},De=b("Events"),z=Object.freeze({DOM_READY:"app:domReady",CORE_INITIALIZED:"app:coreInitialized",MODULES_READY:"app:modulesReady",APP_READY:"app:ready",LOADING_UNBLOCKED:"app:loadingUnblocked",LOADING_HIDE:"app:loaderHide",HERO_INIT_READY:"app:heroInitReady",HERO_LOADED:"hero:loaded",HERO_TYPING_END:"hero:typingEnd",FEATURES_TEMPLATES_LOADED:"featuresTemplatesLoaded",FEATURES_TEMPLATES_ERROR:"featuresTemplatesError",TEMPLATE_MOUNTED:"template:mounted",FEATURES_CHANGE:"features:change",SW_UPDATE_AVAILABLE:"sw:updateAvailable",SW_INSTALLED:"sw:installed",SW_ACTIVATED:"sw:activated",SECTION_LOADED:"section:loaded",SECTION_CHANGE:"section:change",FOOTER_LOADED:"footer:loaded",FOOTER_EXPANDED:"footer:expanded",FOOTER_COLLAPSED:"footer:collapsed"});class ct{constructor(){this.listeners=new Map}on(e,t,n={}){this.listeners.has(e)||this.listeners.set(e,new Set);const r={callback:t,options:n};return this.listeners.get(e).add(r),()=>this.off(e,t)}once(e,t){return this.on(e,t,{once:!0})}off(e,t){const n=this.listeners.get(e);if(n){for(const r of n)if(r.callback===t){n.delete(r);break}n.size===0&&this.listeners.delete(e)}}emit(e,t){const n=this.listeners.get(e);if(n)for(const r of[...n])try{r.callback(t),r.options.once&&n.delete(r)}catch(s){De.error(`Error in event listener for ${e}:`,s)}}clear(e){e?this.listeners.delete(e):this.listeners.clear()}listenerCount(e){var t;return e?((t=this.listeners.get(e))==null?void 0:t.size)||0:Array.from(this.listeners.values()).reduce((n,r)=>n+r.size,0)}}const dt=new ct;function k(i,e=null,t=document){if(t!=null&&t.dispatchEvent)try{t.dispatchEvent(new CustomEvent(i,{detail:e,bubbles:!0})),dt.emit(i,e)}catch(n){De.error(`Failed to dispatch event: ${i}`,n)}}class lt{constructor(){this.focusTrapStack=[],this.lastFocusedElement=null,this.reducedMotionMQL=window.matchMedia("(prefers-reduced-motion: reduce)"),this.highContrastMQL=window.matchMedia("(prefers-contrast: more)"),this.reducedMotion=this.reducedMotionMQL.matches,this.highContrast=this.highContrastMQL.matches,this._initialized=!1,this.init()}init(){if(!this._initialized){try{this._onReducedMotionChange=e=>{this.reducedMotion=e.matches,this.updateAnimations()},this.reducedMotionMQL.addEventListener("change",this._onReducedMotionChange),this._onHighContrastChange=e=>{this.highContrast=e.matches,this.updateContrast()},this.highContrastMQL.addEventListener("change",this._onHighContrastChange)}catch{try{this._onReducedMotionChange=e=>{this.reducedMotion=e.matches,this.updateAnimations()},this.reducedMotionMQL.addListener(this._onReducedMotionChange),this._onHighContrastChange=e=>{this.highContrast=e.matches,this.updateContrast()},this.highContrastMQL.addListener(this._onHighContrastChange)}catch{}}this.setupKeyboardNav(),this.setupSkipLinks(),this.updateAnimations(),this.updateContrast(),this._initialized=!0}}destroy(){try{this._onReducedMotionChange&&(this.reducedMotionMQL.removeEventListener?this.reducedMotionMQL.removeEventListener("change",this._onReducedMotionChange):this.reducedMotionMQL.removeListener&&this.reducedMotionMQL.removeListener(this._onReducedMotionChange),this._onReducedMotionChange=null)}catch{}try{this._onHighContrastChange&&(this.highContrastMQL.removeEventListener?this.highContrastMQL.removeEventListener("change",this._onHighContrastChange):this.highContrastMQL.removeListener&&this.highContrastMQL.removeListener(this._onHighContrastChange),this._onHighContrastChange=null)}catch{}try{this._onKeyboardNav&&document.removeEventListener("keydown",this._onKeyboardNav)}catch{}try{this._skipRemovers&&this._skipRemovers.length&&this._skipRemovers.forEach(e=>e())}catch{}}setupKeyboardNav(){this._onKeyboardNav=e=>{e.key==="Escape"&&this.handleEscape(),e.key==="Tab"&&this.focusTrapStack.length>0&&this.handleTabInTrap(e)},document.addEventListener("keydown",this._onKeyboardNav)}setupSkipLinks(){const e=document.querySelectorAll(".skip-link");this._skipRemovers=[],e.forEach(t=>{const n=r=>{r.preventDefault();const s=t.getAttribute("href");if(!s)return;const o=document.querySelector(s);o&&(o.setAttribute("tabindex","-1"),o.focus(),o.addEventListener("blur",()=>{try{o.removeAttribute("tabindex")}catch{}},{once:!0}))};t.addEventListener("click",n),this._skipRemovers.push(()=>t.removeEventListener("click",n))})}trapFocus(e){if(!e)return;const t=e.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])');if(!t||t.length===0)return;const n=t[0],r=t[t.length-1];this.lastFocusedElement=document.activeElement;const s={container:e,firstFocusable:n,lastFocusable:r};this.focusTrapStack.push(s);try{n.focus({preventScroll:!0})}catch{try{n.focus()}catch{}}}releaseFocus(){if(this.focusTrapStack.pop()&&this.lastFocusedElement)try{this.lastFocusedElement.focus({preventScroll:!0})}catch{try{this.lastFocusedElement.focus()}catch{}}}handleTabInTrap(e){if(this.focusTrapStack.length===0)return;const t=this.focusTrapStack[this.focusTrapStack.length-1];e.shiftKey?document.activeElement===t.firstFocusable&&(e.preventDefault(),t.lastFocusable.focus()):document.activeElement===t.lastFocusable&&(e.preventDefault(),t.firstFocusable.focus())}handleEscape(){const e=document.querySelector(".footer-cookie-settings:not(.hidden)");if(e){const n=e.querySelector(".cookie-settings-close");n&&n.click();return}const t=document.getElementById("site-footer");if(t&&t.classList.contains("footer-expanded"))try{document.dispatchEvent(new CustomEvent("footer:requestClose"))}catch{}}updateAnimations(){this.reducedMotion&&(document.documentElement.style.setProperty("--transition-fast","0s"),document.documentElement.style.setProperty("--transition-base","0s"),document.documentElement.style.setProperty("--transition-smooth","0s"),document.documentElement.style.setProperty("--transition-slow","0s"))}updateContrast(){this.highContrast?document.body.classList.add("high-contrast"):document.body.classList.remove("high-contrast")}announce(e,{priority:t="polite",clearPrevious:n=!0}={}){if(!e)return;if(typeof(window==null?void 0:window.announce)=="function")try{window.announce(e,{assertive:t==="assertive"});return}catch{}const r=t==="assertive"?document.getElementById("live-region-assertive"):document.getElementById("live-region-status");r&&(n&&(r.textContent=""),setTimeout(()=>{try{r.textContent=e}catch{}},100))}}const S=new lt;window.a11y=S;function ut(){const i=new Map;return(e,{assertive:t=!1,dedupe:n=!1}={})=>{if(e&&!(n&&i.has(e))){n&&(i.set(e,!0),setTimeout(()=>i.delete(e),3e3));try{const r=t?"live-region-assertive":"live-region-status",s=document.getElementById(r);if(!s)return;s.textContent="",requestAnimationFrame(()=>{s.textContent=e})}catch{}}}}const _=b("Cache");class ht{constructor(e=100){this.cache=new Map,this.maxSize=e}get(e){const t=this.cache.get(e);return t?t.expires&&t.expires<Date.now()?(this.cache.delete(e),null):t.value:null}set(e,t,n=3e5){if(this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,{value:t,expires:n?Date.now()+n:null})}delete(e){return this.cache.delete(e)}clear(){this.cache.clear()}get size(){return this.cache.size}}class ft{constructor(e="app-cache",t=1){this.dbName=e,this.version=t,this.db=null}async init(){return this.db?this.db:new Promise((e,t)=>{const n=globalThis.indexedDB.open(this.dbName,this.version);n.onerror=()=>t(n.error),n.onsuccess=()=>{this.db=n.result,e(this.db)},n.onupgradeneeded=r=>{const s=r.target.result;s.objectStoreNames.contains("cache")||s.createObjectStore("cache",{keyPath:"key"})}})}async get(e){try{return await this.init(),new Promise((t,n)=>{const o=this.db.transaction(["cache"],"readonly").objectStore("cache").get(e);o.onsuccess=()=>{const c=o.result;if(!c){t(null);return}if(c.expires&&c.expires<Date.now()){this.delete(e),t(null);return}t(c.value)},o.onerror=()=>n(o.error)})}catch(t){return _.warn("IndexedDB get failed:",t),null}}async set(e,t,n=36e5){try{return await this.init(),new Promise((r,s)=>{const a=this.db.transaction(["cache"],"readwrite").objectStore("cache").put({key:e,value:t,expires:n?Date.now()+n:null,created:Date.now()});a.onsuccess=()=>r(!0),a.onerror=()=>s(a.error)})}catch(r){return _.warn("IndexedDB set failed:",r),!1}}async delete(e){try{return await this.init(),new Promise((t,n)=>{const o=this.db.transaction(["cache"],"readwrite").objectStore("cache").delete(e);o.onsuccess=()=>t(!0),o.onerror=()=>n(o.error)})}catch(t){return _.warn("IndexedDB delete failed:",t),!1}}async clear(){try{return await this.init(),new Promise((e,t)=>{const s=this.db.transaction(["cache"],"readwrite").objectStore("cache").clear();s.onsuccess=()=>e(!0),s.onerror=()=>t(s.error)})}catch(e){return _.warn("IndexedDB clear failed:",e),!1}}}class mt{constructor(e={}){this.memory=new ht(e.memorySize||100),this.idb=new ft(e.dbName,e.dbVersion),this.useIndexedDB=e.useIndexedDB??!0}async get(e){const t=this.memory.get(e);if(t!==null)return _.debug(`Cache hit (memory): ${e}`),t;if(this.useIndexedDB){const n=await this.idb.get(e);if(n!==null)return _.debug(`Cache hit (IndexedDB): ${e}`),this.memory.set(e,n),n}return _.debug(`Cache miss: ${e}`),null}async set(e,t,n={}){const{ttl:r=3e5,persistent:s=!1}=n;this.memory.set(e,t,r),s&&this.useIndexedDB&&await this.idb.set(e,t,r),_.debug(`Cache set: ${e}`)}async delete(e){this.memory.delete(e),this.useIndexedDB&&await this.idb.delete(e),_.debug(`Cache deleted: ${e}`)}async clear(){this.memory.clear(),this.useIndexedDB&&await this.idb.clear(),_.info("Cache cleared")}getStats(){return{memorySize:this.memory.size,memoryMaxSize:this.memory.maxSize}}}let oe=null;function pt(i){return oe||(oe=new mt(i)),oe}const ae=b("Fetch"),Ae=pt({memorySize:100});async function gt(i,e={}){const{timeout:t=8e3,retries:n=3,retryDelay:r=1e3,cache:s=!1,cacheTTL:o=3e5,fetchOptions:c={}}=e;if(s){const l=await Ae.get(i);if(l)return ae.debug(`Cache hit: ${i}`),l.clone()}let a;for(let l=0;l<=n;l++){const d=new AbortController,f=setTimeout(()=>d.abort(),t);try{const h=await fetch(i,{...c,signal:d.signal,credentials:c.credentials||"same-origin"});if(clearTimeout(f),!h.ok)throw new Error(`HTTP ${h.status}: ${h.statusText}`);return s&&await Ae.set(i,h.clone(),{ttl:o}),h}catch(h){if(clearTimeout(f),a=h,h.name==="AbortError"||h.message&&h.message.includes("HTTP 4"))break;l<n&&(ae.warn(`Fetch attempt ${l+1} failed, retrying...`,h),await Ne(r*(l+1)))}}throw ae.error(`Fetch failed after ${n+1} attempts:`,a),a}async function Ee(i,e={}){return(await gt(i,e)).text()}const ce=b("SectionManager");class yt{constructor(){this.loadedSections=new WeakSet}async loadSection(e){if(this.loadedSections.has(e)){ce.debug(`Section already loaded: ${e.id}`);return}const t=e.dataset.sectionSrc;if(t){this.loadedSections.add(e),e.setAttribute("aria-busy","true");try{let n;try{n=await Ee(t)}catch{n=await Ee(t+".html")}const r=Array.from(e.children);r.length>0&&(ce.debug(`Section ${e.id}: clearing ${r.length} existing elements`),r.forEach(o=>o.remove())),e.insertAdjacentHTML("beforeend",n);const s=e.querySelector("template");s&&e.appendChild(s.content.cloneNode(!0)),e.removeAttribute("aria-busy"),y.translateElement(e),e.id==="hero"&&k(z.HERO_LOADED),document.dispatchEvent(new CustomEvent("section:loaded",{detail:{id:e.id}}))}catch(n){ce.warn(`Section load failed: ${e.id}`,n),e.removeAttribute("aria-busy")}}}init(){if(this._initialized)return;this._initialized=!0;const e=Array.from(document.querySelectorAll("section[data-section-src]")),t=e.filter(r=>r.dataset.eager!==void 0),n=e.filter(r=>r.dataset.eager===void 0);if(t.forEach(r=>this.loadSection(r)),n.length){const r=tt(s=>{s.forEach(o=>{o.isIntersecting&&this.loadSection(o.target)})},{rootMargin:"100px"});n.forEach(s=>r.observe(s))}}reinit(){this._initialized=!1,this.loadedSections=new WeakSet,this.init()}async retrySection(e){this.loadedSections.delete(e),await this.loadSection(e)}}const Q=b("GlobalLoader"),ue={LOADING_HIDE:"loading:hide",LOADING_SHOW:"loading:show",LOADING_UPDATE:"loading:update"};let q=null,he=0;const At=5e3;function Me(){const i=Date.now();if(q&&i-he<At)return q;const e=document.getElementById("app-loader"),t=document.getElementById("loader-status-text"),n=document.getElementById("loader-progress-bar"),r=document.getElementById("loader-percentage");return!e||!t||!n||!r?(q=null,null):(q={overlay:e,statusText:t,progressBar:n,percentage:r},he=i,q)}function be(){q=null,he=0}function D(i,e,t={}){try{const n=Me();if(!n)return;const{statusText:r,progressBar:s,percentage:o}=n,c=Math.round(Math.max(0,Math.min(100,i*100)));r&&r.textContent!==e&&(r.textContent=e);const a=`${c}%`;s&&s.style.width!==a&&(s.style.width=a),o&&o.textContent!==a&&(o.textContent=a),k(ue.LOADING_UPDATE,{progress:c,message:e}),t.silent||Q.debug(`Loader: ${c}% - ${e}`)}catch(n){Q.warn("Could not update loader:",n)}}function we(i=0,e={}){try{const t=Me();if(!t)return;const{overlay:n}=t;setTimeout(()=>{if(e.immediate){n.style.display="none",n.setAttribute("aria-hidden","true"),n.dataset.loaderDone="true",document.body.classList.remove("global-loading-visible"),k(ue.LOADING_HIDE),globalThis.dispatchEvent(new Event("app-ready")),be(),Q.debug("Loader hidden (immediate)");return}n.classList.add("fade-out"),n.setAttribute("aria-hidden","true"),n.removeAttribute("aria-live"),n.dataset.loaderDone="true",setTimeout(()=>{n.style.display="none",document.body.classList.remove("global-loading-visible"),be()},800),k(ue.LOADING_HIDE),globalThis.dispatchEvent(new Event("app-ready")),Q.debug("Loader hidden")},i)}catch(t){Q.warn("Could not hide loader:",t)}}const M=b("ThreeEarthManager");class Et{constructor(e){this.env=e,this.cleanupFn=null,this.isLoading=!1}getContainer(){return I("threeEarthContainer")||I("earth-container")}async load(){var n;if(this.isLoading||this.cleanupFn)return;if(this.env.isTest&&!globalThis.__FORCE_THREE_EARTH){M.info("Test environment - skipping Three.js Earth");return}if(!this.getContainer()){M.debug("Earth container not found");return}if((n=navigator.connection)!=null&&n.saveData){M.info("Three.js skipped: save-data mode");return}this.isLoading=!0,this.preloadTextures();const t=setTimeout(()=>{M.warn("Three.js Earth loading timeout, unblocking loader");const r=globalThis.__appLoadManager;r&&r.unblock("three-earth")},6e3);try{M.info("Loading Three.js Earth system...");const{initThreeEarth:r}=await ee(async()=>{const{initThreeEarth:s}=await import("./three-earth-system-C9YhJnf6.js");return{initThreeEarth:s}},[]);if(typeof r!="function")throw new Error("initThreeEarth not found in module exports");this.cleanupFn=await r(),typeof this.cleanupFn=="function"&&(globalThis.__threeEarthCleanup=this.cleanupFn,M.info("Three.js Earth system initialized"),clearTimeout(t))}catch(r){M.warn("Three.js failed, using CSS fallback:",r),clearTimeout(t);const s=globalThis.__appLoadManager;s&&s.unblock("three-earth")}finally{this.isLoading=!1}}preloadTextures(){["/content/assets/img/earth/textures/earth_day.webp","/content/assets/img/earth/textures/earth_night.webp","/content/assets/img/earth/textures/earth_normal.webp","/content/assets/img/earth/textures/earth_bump.webp"].forEach(t=>{const n=new Image;n.src=t})}init(){this.getContainer()&&this.load()}initDelayed(){(globalThis.requestIdleCallback||setTimeout)(()=>this.init(),{timeout:500})}cleanup(){if(this.cleanupFn)try{this.cleanupFn(),this.cleanupFn=null,M.info("Three.js Earth cleaned up")}catch(e){M.warn("Cleanup failed:",e)}}}const H=b("ImageOptimizer"),P=(()=>{const i={};return async e=>{if(i[e]!==void 0)return i[e];const t={avif:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",webp:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="};return t[e]?new Promise(n=>{const r=new Image;r.onload=()=>{i[e]=r.width===1,n(i[e])},r.onerror=()=>{i[e]=!1,n(!1)},r.src=t[e]}):(i[e]=!1,!1)}})();async function K(i,e={}){const{width:t,quality:n=85,format:r="auto"}=e;if(i.includes("unsplash.com")){const s=new URL(i);if(t&&s.searchParams.set("w",t),s.searchParams.set("q",n),r==="auto"){const o=await P("avif"),c=await P("webp");o?s.searchParams.set("fm","avif"):c&&s.searchParams.set("fm","webp")}else r!=="original"&&s.searchParams.set("fm",r);return s.toString()}if(r==="auto"){const s=await P("avif"),o=await P("webp");if(s){const c=i.replace(/\.(jpg|jpeg|png)$/i,".avif");if(await ve(c))return c}if(o){const c=i.replace(/\.(jpg|jpeg|png)$/i,".webp");if(await ve(c))return c}}return i}async function ve(i){try{return(await fetch(i,{method:"HEAD"})).ok}catch{return!1}}async function bt(i){const{src:e,alt:t="",sizes:n="100vw",widths:r=[320,640,960,1280,1920],loading:s="lazy",fetchpriority:o="auto",className:c="",aspectRatio:a}=i,l=document.createElement("picture");if(await P("avif")){const g=document.createElement("source");g.type="image/avif",g.srcset=await de(e,r,"avif"),g.sizes=n,l.appendChild(g)}if(await P("webp")){const g=document.createElement("source");g.type="image/webp",g.srcset=await de(e,r,"webp"),g.sizes=n,l.appendChild(g)}const h=document.createElement("img");return h.src=await K(e,{width:r[2]}),h.srcset=await de(e,r),h.sizes=n,h.alt=t,h.loading=s,h.decoding="async",o!=="auto"&&(h.fetchPriority=o),c&&(h.className=c),a&&(h.style.aspectRatio=a),l.appendChild(h),l}async function de(i,e,t){return(await Promise.all(e.map(async r=>`${await K(i,{width:r,format:t})} ${r}w`))).join(", ")}function Oe(i,e={}){const{rootMargin:t="50px",threshold:n=.01,placeholder:r="blur"}=e;let s;typeof i=="string"?s=Array.from(document.querySelectorAll(i)):i instanceof NodeList||Array.isArray(i)?s=Array.from(i):s=[i];const o=s.filter(c=>{if(!(c instanceof HTMLElement))return!1;const a=c.dataset.loaded;return a!=="true"&&a!=="handling"&&a!=="error"});o.length!==0&&o.forEach(c=>{const a=c;r==="blur"&&!a.style.filter&&(a.style.filter="blur(10px)",a.style.transition="filter 0.3s ease-out"),Ie(a,async l=>{const d=l.target;try{if(d.dataset.src){const f=await K(d.dataset.src);d.src=f}else if(!d.src){H.warn("Image has no src or data-src attribute"),d.dataset.loaded="skipped";return}d.dataset.srcset&&(d.srcset=d.dataset.srcset),await new Promise((f,h)=>{d.onload=f,d.onerror=h,setTimeout(h,1e4)}),r==="blur"&&(d.style.filter="none"),d.dataset.loaded="true",d.classList.add("loaded"),H.debug(`Image loaded: ${d.src}`)}catch(f){const h=d.src&&d.src.includes("ytimg.com"),g=d.src&&d.src!=="undefined"&&d.src!=="";h?H.debug("YouTube thumbnail load failed, fallback handler will retry"):g&&f&&H.error("Failed to load image:",f),d.dataset.loaded="error",r==="blur"&&(d.style.filter="none")}},{rootMargin:t,threshold:n})})}function wt(i,e={}){const t=document.querySelector(i);if(!t){H.warn(`Container not found: ${i}`);return}const n=t.querySelectorAll('img[data-src], img[loading="lazy"]');if(n.length===0){H.debug(`No lazy images found in ${i}`);return}H.info(`Lazy loading ${n.length} images in ${i}`),Oe(Array.from(n).filter(r=>r instanceof HTMLElement),e)}async function vt(i,e={}){const{as:t="image",fetchpriority:n="high"}=e,r=i.map(async s=>{const o=await K(s),c=document.createElement("link");c.rel="preload",c.as=t,c.href=o,c.fetchPriority=n;const a=await P("avif"),l=await P("webp");a?c.type="image/avif":l&&(c.type="image/webp"),document.head.appendChild(c),H.debug(`Preloading image: ${o}`)});await Promise.all(r)}const Le={getOptimizedImageUrl:K,createResponsiveImage:bt,lazyLoadImages:Oe,lazyLoadImagesInContainer:wt,preloadImages:vt,checkFormatSupport:P},Te=b("ImageLoaderHelper");async function Lt(i={}){const{autoOptimize:e=!0,preloadCritical:t=!0}=i;if(e){if(Te.info("Initializing image optimization..."),document.readyState==="loading"&&await new Promise(n=>{document.addEventListener("DOMContentLoaded",n,{once:!0})}),t){const n=document.querySelectorAll('img[fetchpriority="high"]');if(n.length>0){const r=Array.from(n).map(s=>s.src||s.dataset.src).filter(Boolean);await Le.preloadImages(r)}}Le.lazyLoadImagesInContainer("body",i),Te.info("Image optimization initialized")}}const A=b("performance");class Tt{constructor(){this.metrics={},this.initialized=!1}init(){this.initialized||(this.initialized=!0,this.observeWebVitals(),this.trackNavigationTiming(),this.trackResourceTiming())}observeWebVitals(){this.observePaint("first-contentful-paint",e=>{this.metrics.FCP=e.startTime,A.info(`FCP: ${Math.round(e.startTime)}ms`)}),this.observeLCP(),this.observeFID(),this.observeCLS()}observePaint(e,t){try{const n=new PerformanceObserver(r=>{for(const s of r.getEntries())s.name===e&&(t(s),n.disconnect())});n.observe({type:"paint",buffered:!0})}catch(n){A.warn("Paint observer failed:",n)}}observeLCP(){try{new PerformanceObserver(t=>{const n=t.getEntries(),r=n[n.length-1];this.metrics.LCP=r.startTime,A.info(`LCP: ${Math.round(r.startTime)}ms`)}).observe({type:"largest-contentful-paint",buffered:!0})}catch(e){A.warn("LCP observer failed:",e)}}observeFID(){try{const e=new PerformanceObserver(t=>{for(const n of t.getEntries()){const r=n.processingStart-n.startTime;this.metrics.FID=r,A.info(`FID: ${Math.round(r)}ms`),e.disconnect()}});e.observe({type:"first-input",buffered:!0})}catch(e){A.warn("FID observer failed:",e)}}observeCLS(){try{let e=0;new PerformanceObserver(n=>{for(const r of n.getEntries())r.hadRecentInput||(e+=r.value,this.metrics.CLS=e)}).observe({type:"layout-shift",buffered:!0}),window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&A.info(`CLS: ${e.toFixed(3)}`)},{once:!0})}catch(e){A.warn("CLS observer failed:",e)}}trackNavigationTiming(){try{window.addEventListener("load",()=>{const t=performance.getEntriesByType("navigation")[0];if(t){this.metrics.TTFB=t.responseStart-t.requestStart,A.info(`TTFB: ${Math.round(this.metrics.TTFB)}ms`);const n=t.domInteractive-t.fetchStart;A.info(`DOM Interactive: ${Math.round(n)}ms`);const r=t.domComplete-t.fetchStart;A.info(`DOM Complete: ${Math.round(r)}ms`);const s=t.loadEventEnd-t.fetchStart;A.info(`Load Complete: ${Math.round(s)}ms`)}})}catch(e){A.warn("Navigation timing failed:",e)}}trackResourceTiming(){try{window.addEventListener("load",()=>{const e=performance.getEntriesByType("resource"),t={total:e.length,scripts:0,styles:0,images:0,fonts:0,other:0};e.forEach(n=>{const r=n.initiatorType;r==="script"?t.scripts++:r==="css"||r==="link"?t.styles++:r==="img"?t.images++:r==="font"?t.fonts++:t.other++}),A.info("Resource Stats:",t)})}catch(e){A.warn("Resource timing failed:",e)}}getMetrics(){return{...this.metrics}}async sendMetrics(e){try{await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metrics:this.metrics,url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()})})}catch(t){A.warn("Failed to send metrics:",t)}}}let le=null;function St(){return le||(le=new Tt),le}function Ct(){St().init()}const Se=b("SectionTracker"),_t=50,It={threshold:[.1,.3,.5,.7],rootMargin:"-10% 0px -10% 0px"};class Dt{constructor(){this.sections=[],this.sectionRatios=new Map,this.currentSectionId=null,this.observer=null,this.refreshHandler=null}init(){_e(()=>this.setupObserver()),this.refreshHandler=()=>setTimeout(()=>this.refreshSections(),_t),document.addEventListener("section:loaded",this.refreshHandler),document.addEventListener("footer:loaded",this.refreshHandler)}setupObserver(){this.refreshSections(),!(!window.IntersectionObserver||this.sections.length===0)&&(this.observer=new IntersectionObserver(e=>this.handleIntersections(e),It),this.sections.forEach(e=>{this.observer&&this.observer.observe(e)}),typeof window.requestIdleCallback=="function"?requestIdleCallback(()=>this.checkInitialSection(),{timeout:1e3}):setTimeout(()=>this.checkInitialSection(),100))}refreshSections(){const e=Array.from(document.querySelectorAll("main .section[id], footer#site-footer[id]")),t=[];for(const n of e)n instanceof HTMLElement&&n.id&&t.push(n);t.length!==this.sections.length&&(this.sections=t,this.observer&&this.sections.forEach(n=>{this.observer&&this.observer.observe(n)}))}handleIntersections(e){var s;let t=!1;if(e.forEach(o=>{const c=o.target;if(c!=null&&c.id){const a=this.sectionRatios.get(c.id),l={ratio:o.intersectionRatio,isIntersecting:o.isIntersecting,target:c};(!a||a.ratio!==l.ratio||a.isIntersecting!==l.isIntersecting)&&(this.sectionRatios.set(c.id,l),t=!0)}}),!t)return;let n=null,r=0;for(const o of this.sections){if(!o||!o.id)continue;const c=this.sectionRatios.get(o.id);c&&c.isIntersecting&&c.ratio>r&&(r=c.ratio,n=c)}if(n&&((s=n.target)!=null&&s.id)){const o=n.target.id;o!==this.currentSectionId&&(this.currentSectionId=o,this.dispatchSectionChange(o))}}checkInitialSection(){const e=window.innerHeight/2;let t=null,n=1/0;for(const r of this.sections){if(!r)continue;const s=r.getBoundingClientRect(),o=s.top+s.height/2,c=Math.abs(o-e);c<n&&s.top<e&&s.bottom>e&&(n=c,t=r)}t!=null&&t.id&&t.id!==this.currentSectionId&&(this.currentSectionId=t.id,this.dispatchSectionChange(t.id))}dispatchSectionChange(e){try{const t=this.sections.findIndex(s=>s&&typeof s.id=="string"?s.id===e:!1),n=I(e),r={id:e,index:t,section:n};window.dispatchEvent(new CustomEvent("snapSectionChange",{detail:r})),Se.debug(`Section changed: ${e}`)}catch(t){Se.warn("Failed to dispatch section change:",t)}}updateCurrentSection(e){this.sections.find(n=>n&&typeof n.id=="string"?n.id===e:!1)&&(this.currentSectionId=e,this.dispatchSectionChange(e))}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.refreshHandler&&(document.removeEventListener("section:loaded",this.refreshHandler),document.removeEventListener("footer:loaded",this.refreshHandler),this.refreshHandler=null),this.sections=[],this.sectionRatios.clear(),this.currentSectionId=null}}const w=b("main"),Mt=(i=2500)=>{try{setTimeout(async()=>{if(navigator!=null&&navigator.storage)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch(e){w.warn("Persistent storage request failed:",e)}},i)}catch{}},E=(()=>{const i=new Set;return{block(e){e&&(i.add(e),w.debug(`Blocked: ${e}`))},unblock(e){e&&(i.delete(e),w.debug(`Unblocked: ${e}`),i.size===0&&k(z.LOADING_UNBLOCKED))},isBlocked(){return i.size>0},getPending(){return Array.from(i)}}})();globalThis.__appLoadManager=E;const Re={isTest:new URLSearchParams(globalThis.location.search).has("test")||navigator.userAgent.includes("HeadlessChrome")||globalThis.location.hostname==="localhost"&&globalThis.navigator.webdriver},Ot=2200,Rt={TIMEOUT_MS:8e3},O={start:performance.now(),domReady:0,modulesReady:0,windowLoaded:0},fe=ut();globalThis.announce=fe;const kt=new Dt;kt.init();const ke=new yt;let Ce=!1;const Pt=()=>{var i,e;if(Ce){w.debug("App already initialized, skipping duplicate init");return}Ce=!0,ke.init(),requestAnimationFrame(()=>{Bt.init()});try{(i=S==null?void 0:S.updateAnimations)==null||i.call(S),(e=S==null?void 0:S.updateContrast)==null||e.call(S)}catch{}};_e(Pt);const Bt=new Et(Re);let J=!1;const xt={handleRetry(i){var t;if((t=i.target)!=null&&t.closest(".retry-btn")){i.preventDefault();try{globalThis.location.reload()}catch{}}},async handleShare(i){var r;const e=(r=i.target)==null?void 0:r.closest(".btn-share");if(!e)return;i.preventDefault();const t=e.dataset.shareUrl||"https://www.youtube.com/@aks.030",n={title:document.title,text:"Schau dir diesen Kanal an",url:t};if(navigator.share)try{await navigator.share(n)}catch(s){w.warn("share failed",s)}else if(navigator.clipboard)try{await navigator.clipboard.writeText(t),fe("Link kopiert",{dedupe:!0})}catch(s){w.warn("Copy failed",s)}else try{globalThis.prompt("Link kopieren",t)}catch(s){w.warn("prompt failed",s)}},handleClick(i){this.handleRetry(i),this.handleShare(i)}};document.addEventListener("DOMContentLoaded",async()=>{await y.init(),O.domReady=performance.now(),D(.1,y.t("loader.status_init")),Ct(),k(z.DOM_READY);let i=!1,e=!1;const t=()=>{var s;const r=I("threeEarthContainer")||I("earth-container");return!r||((s=r==null?void 0:r.dataset)==null?void 0:s.threeReady)==="1"},n=()=>{var r,s,o;w.debug("checkReady called",{modulesReady:i,windowLoaded:e,isBlocked:(r=E==null?void 0:E.isBlocked)==null?void 0:r.call(E),isEarthReady:t(),pending:(s=E==null?void 0:E.getPending)==null?void 0:s.call(E)}),!(!i||!e)&&((o=E==null?void 0:E.isBlocked)!=null&&o.call(E)||t()&&(J||(J=!0,D(1,y.t("loader.ready_system")),setTimeout(()=>we(),100),fe(y.t("loader.app_loaded"),{dedupe:!0}))))};document.addEventListener(z.LOADING_UNBLOCKED,n),globalThis.addEventListener("load",()=>{O.windowLoaded=performance.now(),e=!0,D(.7,y.t("loader.resources")),n()},{once:!0}),D(.2,y.t("loader.modules_core")),k(z.CORE_INITIALIZED),k(z.HERO_INIT_READY),D(.3,y.t("loader.hero_init")),at(ke),D(.4,y.t("loader.system_3d")),D(.5,y.t("loader.optimize_images")),Lt({autoOptimize:!0,preloadCritical:!0,lazyLoadSelector:'img[loading="lazy"]'}).catch(r=>{w.warn("Image optimization init failed:",r)}),i=!0,O.modulesReady=performance.now(),D(.6,y.t("loader.modules_loaded")),k(z.MODULES_READY),n(),setTimeout(()=>{J||(w.info("Forcing loading screen hide after timeout"),J=!0,D(1,y.t("loader.timeout")),we())},Rt.TIMEOUT_MS),Mt(Ot);try{document.querySelectorAll('link[rel="stylesheet"][data-defer="1"]').forEach(r=>{const s=r;s.media="all";const o=r;delete o.dataset.defer})}catch{}document.addEventListener("click",r=>xt.handleClick(r)),w.info("Performance:",{domReady:Math.round(O.domReady-O.start),modulesReady:Math.round(O.modulesReady-O.start),windowLoaded:Math.round(O.windowLoaded-O.start)})},{once:!0});globalThis.addEventListener("pageshow",i=>{i.persisted&&(w.info("Page restored from bfcache"),globalThis.dispatchEvent(new CustomEvent("resize")),!document.hidden&&globalThis.threeEarthSystem&&globalThis.threeEarthSystem.animate&&document.dispatchEvent(new CustomEvent("visibilitychange")))});"serviceWorker"in navigator&&!Re.isTest&&globalThis.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(i=>{w.info("Service Worker registered:",i.scope),i.addEventListener("updatefound",()=>{const e=i.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&w.info("New service worker available")})})}).catch(i=>{w.warn("Service Worker registration failed:",i)})});export{He as B,te as E,Ft as a,D as b,b as c,tt as d,Nt as e,I as g,Ht as t,R as u};
