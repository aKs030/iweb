<!DOCTYPE html>
<html lang="de">
  <head>
    <!-- Google Tag Manager: dynamically injected via /content/components/head/head-inline.js using /content/config/site-config.js. Remove hard-coded IDs and maintain configuration in site-config.js. -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />

    <!-- Server-side favicons for crawlers and browsers -->
    <link rel="icon" href="/content/assets/img/icons/favicon.ico" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/content/assets/img/icons/favicon-32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="/content/assets/img/icons/favicon-192.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/content/assets/img/icons/apple-touch-icon.png"
    />
    <title>Referenzen & Code-Projekte | Abdulkerim Sesli</title>
    <meta
      name="description"
      content="Entdecke interaktive Web-Experimente und Business-Anwendungen. Spezialisiert auf performante React-Lösungen, 3D-Web (Three.js) und modernes UI/UX Design."
    />
    <meta name="dateCreated" content="2025-12-31T12:00:00Z" />
    <!-- Canonical tag (static for reliable Google indexing) -->
    <link rel="canonical" href="https://abdulkerimsesli.de/projekte/" />

    <!-- Preload critical OG image -->
    <link
      rel="preload"
      href="/content/assets/img/og/og-projects.png"
      as="image"
      type="image/png"
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://abdulkerimsesli.de/projekte/" />
    <meta
      property="og:title"
      content="Referenzen & Code-Projekte | Abdulkerim Sesli"
    />
    <meta
      property="og:description"
      content="Entdecke interaktive Web-Experimente und Business-Anwendungen. Spezialisiert auf performante React-Lösungen, 3D-Web (Three.js) und modernes UI/UX Design."
    />
    <meta
      property="og:image"
      content="https://abdulkerimsesli.de/content/assets/img/og/og-projekte.png"
    />
    <meta property="og:locale" content="de_DE" />
    <meta
      property="og:site_name"
      content="Abdulkerim — Digital Creator Portfolio"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:url"
      content="https://abdulkerimsesli.de/projekte/"
    />
    <meta
      property="twitter:title"
      content="Referenzen & Code-Projekte | Abdulkerim Sesli"
    />
    <meta
      property="twitter:description"
      content="Entdecke interaktive Web-Experimente und Business-Anwendungen. Spezialisiert auf performante React-Lösungen, 3D-Web (Three.js)."
    />
    <meta
      property="twitter:image"
      content="https://abdulkerimsesli.de/content/assets/img/og/og-projekte.png"
    />

    <!-- head-complete.js is now loaded dynamically by head-inline.js -->
    <script
      type="module"
      src="/content/components/head/head-inline.js"
    ></script>

    <script
      type="module"
      src="/content/main.js"
      crossorigin="anonymous"
      defer
    ></script>

    <!-- React Dependencies (Production Version für bessere Performance) -->
    <!-- Load React & ReactDOM from jsDelivr (allowed by CSP in content/head/head.html) -->
    <script
      crossorigin
      src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"
    ></script>

    <!-- Page Specific Styles -->
    <link rel="stylesheet" href="projekte.css" />

    <!-- Server-side JSON-LD: Project ItemList + individual CreativeWork entries for SEO -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "BreadcrumbList",
            "name": "Projekte",
            "itemListElement": [
              {
                "@type": "ListItem",
                "position": 1,
                "name": "Startseite",
                "item": {
                  "@id": "https://abdulkerimsesli.de/",
                  "name": "Startseite"
                }
              },
              {
                "@type": "ListItem",
                "position": 2,
                "name": "Projekte",
                "item": {
                  "@id": "https://abdulkerimsesli.de/projekte/",
                  "name": "Projekte"
                }
              }
            ]
          },
          {
            "@type": "WebPage",
            "url": "https://abdulkerimsesli.de/projekte/",
            "name": "Projekte — Abdulkerim Sesli",
            "mainEntity": {
              "@type": "ItemList",
              "@id": "https://abdulkerimsesli.de/projekte/#projects-list"
            }
          },
          {
            "@type": "ItemList",
            "name": "Projekte von Abdulkerim Sesli",
            "itemListElement": [
              {
                "@type": "ListItem",
                "position": 1,
                "url": "https://abdulkerimsesli.de/projekte/#project-1",
                "name": "Schere Stein Papier"
              },
              {
                "@type": "ListItem",
                "position": 2,
                "url": "https://abdulkerimsesli.de/projekte/#project-2",
                "name": "Zahlen Raten"
              },
              {
                "@type": "ListItem",
                "position": 3,
                "url": "https://abdulkerimsesli.de/projekte/#project-3",
                "name": "Color Changer"
              },
              {
                "@type": "ListItem",
                "position": 4,
                "url": "https://abdulkerimsesli.de/projekte/#project-4",
                "name": "To-Do Liste"
              }
            ]
          },

          {
            "@type": "CreativeWork",
            "name": "Schere Stein Papier",
            "description": "Der Klassiker gegen den Computer!",
            "url": "https://abdulkerimsesli.de/projekte/#project-1",
            "datePublished": "2023-07-05",
            "image": "https://abdulkerimsesli.de/content/assets/img/og/og-projekte.png",
            "author": { "@type": "Person", "name": "Abdulkerim Sesli" },
            "keywords": "JavaScript, Game Logic",
            "about": "Game"
          },
          {
            "@type": "CreativeWork",
            "name": "Zahlen Raten",
            "description": "Finde die geheime Zahl zwischen 1 und 100.",
            "url": "https://abdulkerimsesli.de/projekte/#project-2",
            "datePublished": "2024-08-01",
            "image": "https://abdulkerimsesli.de/content/assets/img/og/og-projekte.png",
            "author": { "@type": "Person", "name": "Abdulkerim Sesli" },
            "keywords": "Logic, Input",
            "about": "Puzzle"
          },
          {
            "@type": "CreativeWork",
            "name": "Color Changer",
            "description": "Dynamische Hintergrundfarben per Klick.",
            "url": "https://abdulkerimsesli.de/projekte/#project-3",
            "datePublished": "2022-03-15",
            "image": "https://abdulkerimsesli.de/content/assets/img/og/og-projekte.png",
            "author": { "@type": "Person", "name": "Abdulkerim Sesli" },
            "keywords": "DOM, Events",
            "about": "UI"
          },
          {
            "@type": "CreativeWork",
            "name": "To-Do Liste",
            "description": "Produktivitäts-Tool zum Verwalten von Aufgaben.",
            "url": "https://abdulkerimsesli.de/projekte/#project-4",
            "datePublished": "2021-11-05",
            "image": "https://abdulkerimsesli.de/content/assets/img/og/og-projekte.png",
            "author": { "@type": "Person", "name": "Abdulkerim Sesli" },
            "keywords": "CRUD, Arrays",
            "about": "App"
          }
        ]
      }
    </script>
  </head>
  <body>
    <div id="app-loader" aria-live="polite" aria-label="Anwendung wird geladen">
      <div class="loader-spinner" aria-hidden="true"></div>
      <div class="loader-content">
        <div class="loader-logo" aria-hidden="true">AKS | WEB</div>

        <div class="progress-container" role="presentation">
          <div class="progress-bar" id="loader-progress-bar"></div>
        </div>

        <div class="loader-info" aria-live="polite">
          <span class="status-text" id="loader-status-text"
            >Initialisiere System...</span
          >
          <span class="percentage" id="loader-percentage">0%</span>
        </div>
      </div>
    </div>

    <noscript>
      <style>
        #app-loader {
          display: none !important;
        }
      </style>
    </noscript>

    <!-- Google Tag Manager (noscript) removed — noscript iframe is injected dynamically by head-inline.js if GTM is configured (see content/config/site-config.js) -->

    <!-- 3D ERDE -->
    <div
      id="threeEarthContainer"
      class="three-earth-container"
      data-section="hero"
    >
      <div class="three-earth-error hidden"><p>WebGL Fehler</p></div>
    </div>

    <!-- Orbs behind everything -->
    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>

    <!-- REACT ROOT (Main Content) -->
    <div id="root"></div>

    <!-- Logic Script -->
    <script type="module">
      import { initProjectsApp } from './projekte-app.js';
      import { createLogger } from '/content/utils/shared-utilities.js';
      import { upsertHeadLink } from '/content/utils/dom-helpers.js';
      const log = createLogger('ProjektePage');

      // Load styles for Three Earth (Progressive Enhancement)
      async function ensureThreeEarthStyles() {
        const href = '/content/components/particles/three-earth.css';
        if (document.querySelector(`link[href="${href}"]`)) return;
        return new Promise((resolve, reject) => {
          upsertHeadLink({
            rel: 'stylesheet',
            href,
            attrs: { media: 'print' },
            onload() {
              try {
                this.media = 'all';
                resolve();
              } catch (e) {
                log.warn('Failed to set link.media', e);
                resolve();
              }
            },
          }) || resolve();
          // add a fallback to reject in case of persistent failure
          setTimeout(() => reject(new Error('stylesheet load timeout')), 5000);
        });
      }

      globalThis.addEventListener('DOMContentLoaded', async () => {
        // 1. React App starten
        initProjectsApp();

        // Lazy-load Three-Earth only when needed: on visibility or user interaction
        const threeContainer = document.getElementById('threeEarthContainer');

        const loadThreeEarth = async () => {
          if (globalThis.__threeEarthLoaded) return;
          globalThis.__threeEarthLoaded = true;
          try {
            const mod = await import(
              '../../content/components/particles/three-earth-system.js'
            );

            // Allow module to expose API and adjust presets before init
            try {
              const config = mod?.EarthSystemAPI?.getConfig?.();
              const basePreset =
                config?.CAMERA?.PRESETS?.features ||
                config?.CAMERA?.PRESETS?.hero;
              if (basePreset) {
                const baseRadius =
                  Math.hypot(basePreset.x || 0, basePreset.z || 0) || 12;
                for (let i = 1; i <= 10; i++) {
                  const angle = i * 0.8;
                  config.CAMERA.PRESETS[`project-${i}`] = {
                    ...basePreset,
                    x: Math.sin(angle) * baseRadius,
                    z: Math.cos(angle) * baseRadius,
                    y: Math.max(2, (basePreset.y || 5) + Math.sin(i * 1.5) * 3),
                    lookAt: basePreset.lookAt,
                  };
                }
              }
            } catch (err) {
              log.warn('Konnte Projekt-Presets nicht automatisch setzen', err);
            }

            try {
              await ensureThreeEarthStyles();
            } catch (e) {
              log.warn('three-earth stylesheet preload failed', e);
            }

            try {
              mod.initThreeEarth();
            } catch (e) {
              log.warn('three-earth init failed', e);
            }
          } catch (e) {
            log.warn('Failed to import three-earth module', e);
          }
        };

        // If IntersectionObserver is available, init when container gets close to viewport
        if ('IntersectionObserver' in globalThis && threeContainer) {
          // Inline one-shot helper to avoid relying on module imports in inline script
          function observeOnceInline(target, onIntersect, options = {}) {
            const obs = new IntersectionObserver((entries, o) => {
              for (const entry of entries) {
                if (entry.isIntersecting) {
                  try {
                    onIntersect(entry);
                  } finally {
                    o.disconnect();
                  }
                  break;
                }
              }
            }, options);
            obs.observe(target);
            return () => obs.disconnect();
          }

          const ioDisconnect = observeOnceInline(
            threeContainer,
            () => loadThreeEarth(),
            { root: null, rootMargin: '200px', threshold: 0.05 },
          );

          // Immediate visibility check: if the container is already within the
          // rootMargin area, trigger load right away to avoid idle/observer delays.
          try {
            const rect = threeContainer.getBoundingClientRect();
            const withinMargin =
              rect.top < (globalThis.innerHeight || 0) + 200 &&
              rect.bottom > -200;
            if (withinMargin) {
              loadThreeEarth();
              ioDisconnect();
            }
          } catch (e) {
            // ignore and rely on IntersectionObserver
          }
        } else {
          // Fallback: load after a short idle period
          setTimeout(loadThreeEarth, 3000);
        }

        // Also trigger on first user interaction to prioritise UX
        const userTrigger = () => {
          loadThreeEarth();
          globalThis.removeEventListener('scroll', userTrigger);
          globalThis.removeEventListener('touchstart', userTrigger);
          globalThis.removeEventListener('pointerdown', userTrigger);
        };
        globalThis.addEventListener('scroll', userTrigger, { passive: true });
        globalThis.addEventListener('touchstart', userTrigger, {
          passive: true,
        });
        globalThis.addEventListener('pointerdown', userTrigger, {
          passive: true,
        });
      });
    </script>
  </body>
</html>
