<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Zahlen Raten | Abdulkerim Sesli</title>
    <meta name="description" content="Errate die Zahl zwischen 1 und 100" />
    <script crossorigin src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
    <link rel="stylesheet" href="/css/tailwind.css">
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
      import htm from 'https://cdn.jsdelivr.net/npm/htm@3.1.1/dist/htm.module.js'
      const html = htm.bind(React.createElement)
      const {useState} = React

      function NumberGuessing() {
        const [targetNumber, setTargetNumber] = useState(() => Math.floor(Math.random() * 100) + 1)
        const [guess, setGuess] = useState('')
        const [message, setMessage] = useState('Errate die Zahl zwischen 1 und 100!')
        const [attempts, setAttempts] = useState(0)
        const [history, setHistory] = useState([])
        const [won, setWon] = useState(false)

        const handleGuess = () => {
          const num = parseInt(guess)
          if (isNaN(num) || num < 1 || num > 100) {
            setMessage('Bitte gib eine Zahl zwischen 1 und 100 ein!')
            return
          }

          const newAttempts = attempts + 1
          setAttempts(newAttempts)
          setHistory([...history, num])

          if (num === targetNumber) {
            setMessage(`üéâ Gratuliere! Du hast die Zahl in ${newAttempts} Versuchen erraten!`)
            setWon(true)
          } else if (num < targetNumber) {
            setMessage(`üìà Zu niedrig! Versuche eine h√∂here Zahl.`)
          } else {
            setMessage(`üìâ Zu hoch! Versuche eine niedrigere Zahl.`)
          }
          setGuess('')
        }

        const reset = () => {
          setTargetNumber(Math.floor(Math.random() * 100) + 1)
          setGuess('')
          setMessage('Errate die Zahl zwischen 1 und 100!')
          setAttempts(0)
          setHistory([])
          setWon(false)
        }

        return html`
          <div
            className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-green-900 via-emerald-800 to-teal-900 p-8">
            <div className="bg-white/10 backdrop-blur-lg rounded-3xl p-8 max-w-2xl w-full border border-white/20">
              <div className="flex justify-between items-center mb-6">
                <h2 className="text-4xl font-bold text-white">Zahlen Raten</h2>
                <a href="/projekte/" className="px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors">
                  ‚Üê Zur√ºck
                </a>
              </div>

              <p className="text-green-200 text-center mb-8">1 bis 100 - Kannst du es erraten?</p>

              <div className="grid grid-cols-2 gap-4 mb-8">
                <div className="bg-white/10 rounded-xl p-4 text-center border border-white/20">
                  <div className="text-3xl font-bold text-green-300">${attempts}</div>
                  <div className="text-sm text-green-200">Versuche</div>
                </div>
                <div className="bg-white/10 rounded-xl p-4 text-center border border-white/20">
                  <div className="text-3xl font-bold text-green-300">
                    ${history.length > 0 ? Math.min(...history) + '-' + Math.max(...history) : '?'}
                  </div>
                  <div className="text-sm text-green-200">Bereich</div>
                </div>
              </div>

              <div
                className="${won
                  ? 'bg-green-500/20 border-green-400/40'
                  : 'bg-white/10 border-white/20'} rounded-2xl p-6 mb-6 text-center font-semibold text-lg border text-white">
                ${message}
              </div>

              ${!won
                ? html`
                    <div className="flex gap-4 mb-6">
                      <input
                        type="number"
                        value=${guess}
                        onChange=${e => setGuess(e.target.value)}
                        onKeyPress=${e => e.key === 'Enter' && handleGuess()}
                        placeholder="Deine Zahl..."
                        className="flex-1 px-6 py-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/40 text-lg focus:outline-none focus:border-green-400/60"
                        min="1"
                        max="100" />
                      <button
                        onClick=${handleGuess}
                        className="px-8 py-4 bg-green-500 hover:bg-green-600 text-white font-bold rounded-xl transition-colors">
                        Raten
                      </button>
                    </div>
                  `
                : null}
              ${history.length > 0
                ? html`
                    <div className="bg-white/5 rounded-xl p-4 mb-6 border border-white/10">
                      <div className="text-sm text-white/60 mb-2">Deine Versuche:</div>
                      <div className="flex flex-wrap gap-2">
                        ${history.map(
                          (h, i) => html`
                            <span key=${i} className="px-3 py-1 bg-white/10 rounded-lg text-green-300 text-sm">${h}</span>
                          `
                        )}
                      </div>
                    </div>
                  `
                : null}

              <button
                onClick=${reset}
                className="w-full px-6 py-4 bg-white/10 hover:bg-white/20 border border-white/20 text-white font-semibold rounded-xl transition-colors">
                Neues Spiel
              </button>
            </div>
          </div>
        `
      }

      const root = ReactDOM.createRoot(document.getElementById('root'))
      root.render(html`
        <${NumberGuessing} />
      `)
    </script>
  </body>
</html>
